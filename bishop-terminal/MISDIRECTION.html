<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Surveyor Bishop's classified field research notes on the ITF portal system — a working document not submitted to VSA Command.">
<meta property="og:title" content="VSA CLASSIFIED — BISHOP FIELD RESEARCH NOTES">
<meta property="og:description" content="Everything I actually think is happening with the ITF portal system, written down in one place.">
<meta property="og:type" content="website">
<title>VSA CLASSIFIED — BISHOP FIELD RESEARCH NOTES</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
<noscript><link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet"></noscript>
<style>
  :root {
    --orange: #c87820;
    --orange-bright: #e8922a;
    --orange-dim: #7a4a10;
    --orange-faint: #2a1a06;
    --bg: #080500;
    --text: #c87820;
    --text-dim: #957030; /* bumped for WCAG contrast */
    --border: #3d2508;
    --border-bright: #7a4a10;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Share Tech Mono', 'Courier New', monospace;
    font-size: 13px;
    line-height: 1.7;
    min-height: 100vh;
    overflow-x: hidden;
  }
  body::before {
    content: '';
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.13) 2px,rgba(0,0,0,0.13) 4px);
    pointer-events: none; z-index: 1000;
  }
  body::after {
    content: '';
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.8) 100%);
    pointer-events: none; z-index: 999;
  }

  /* ── TOPBAR ── */
  .topbar {
    position: fixed; top: 0; left: 0; right: 0; height: 36px;
    background: var(--bg); border-bottom: 1px solid var(--orange);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 20px; z-index: 998; animation: fadeIn 1s ease;
  }
  .topbar-title {
    font-size: 11px; letter-spacing: 0.3em; color: var(--orange-bright);
    text-shadow: 0 0 10px var(--orange);
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
    overflow: hidden;
    max-width: 60%;
  }
  /* Skip to content link for keyboard/screen reader users */
  .skip-link {
    position: absolute; top: -40px; left: 8px;
    background: var(--orange-bright); color: var(--bg);
    padding: 4px 10px; font-size: 11px; letter-spacing: 0.1em;
    z-index: 9999; transition: top 0.2s;
    font-family: 'Share Tech Mono', monospace;
  }
  .skip-link:focus { top: 8px; }
  .topbar-right { display: flex; gap: 20px; font-size: 10px; color: var(--text-dim); letter-spacing: 0.15em; }
  .topbar-right span { border-left: 1px solid var(--border-bright); padding-left: 20px; }
  .topbar-right .sdot { color: #2ecc71; }

  /* On mobile hide some topbar items */
  @media (max-width: 600px) {
    .topbar { padding: 0 12px; }
    .topbar-title { font-size: 9px; letter-spacing: 0.15em; max-width: 55%; }
    .topbar-right { gap: 10px; font-size: 9px; }
    .topbar-right span { border-left: none; padding-left: 0; }
    .topbar-right .hide-mobile { display: none; }
  }

  .container { max-width: 900px; margin: 0 auto; padding: 80px 30px 80px; animation: fadeIn 1.5s ease; }

  @media (max-width: 600px) {
    .container { padding: 64px 14px 48px; }
  }

  .doc-header {
    border: 1px solid var(--orange); padding: 30px; margin-bottom: 40px;
    position: relative;
    background: linear-gradient(180deg, var(--orange-faint) 0%, transparent 100%);
    box-shadow: 0 0 40px rgba(200,120,32,0.1), inset 0 0 40px rgba(0,0,0,0.5);
  }
  .doc-header::before {
    content: '△ VANTAGE SYSTEMS AUTHORITY △';
    position: absolute; top: -8px; left: 50%; transform: translateX(-50%);
    background: var(--bg); padding: 0 12px; font-size: 10px; letter-spacing: 0.3em; color: var(--orange-bright); white-space: nowrap;
  }
  .doc-header::after {
    content: '▽ CLASSIFIED TERMINAL ▽';
    position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
    background: var(--bg); padding: 0 12px; font-size: 10px; letter-spacing: 0.3em; color: var(--text-dim); white-space: nowrap;
  }
  .doc-title { font-size: 22px; font-weight: bold; letter-spacing: 0.2em; color: var(--orange-bright); text-shadow: 0 0 20px var(--orange); text-align: center; margin-bottom: 6px; }
  .doc-subtitle { text-align: center; font-size: 11px; letter-spacing: 0.4em; color: var(--text-dim); margin-bottom: 24px; }
  .meta-grid { display: grid; grid-template-columns: 1fr 1fr; border-top: 1px solid var(--border); padding-top: 20px; margin-top: 20px; }
  @media (max-width: 480px) { .meta-grid { grid-template-columns: 1fr; } .meta-item:nth-child(odd) { border-right: none; padding-right: 0; } .meta-item:nth-child(even) { padding-left: 0; } }
  .meta-item { padding: 6px 0; border-bottom: 1px solid var(--border); font-size: 11px; }
  .meta-item:nth-child(odd) { padding-right: 20px; border-right: 1px solid var(--border); }
  .meta-item:nth-child(even) { padding-left: 20px; }
  .meta-label { color: var(--text-dim); letter-spacing: 0.15em; font-size: 10px; }
  .meta-value { color: var(--orange-bright); margin-top: 2px; }
  .warning-banner { margin-top: 20px; border: 1px solid var(--orange); padding: 10px 16px; background: rgba(200,120,32,0.05); font-size: 11px; letter-spacing: 0.15em; color: var(--orange-bright); text-align: center; animation: bblink 3s infinite; }
  @keyframes bblink { 0%,90%,100%{border-color:var(--orange)} 95%{border-color:var(--orange-dim)} }

  /* ── TOC ── */
  .toc { border: 1px solid var(--border-bright); padding: 24px; margin-bottom: 40px; position: relative; }
  .toc::before { content: 'TABLE OF CONTENTS'; position: absolute; top: -8px; left: 20px; background: var(--bg); padding: 0 10px; font-size: 10px; letter-spacing: 0.3em; color: var(--text-dim); }
  .toc-item { display: flex; align-items: baseline; padding: 5px 0; cursor: pointer; transition: color 0.2s; font-size: 12px; text-decoration: none; color: var(--text); border-radius: 2px; }
  .toc-item:hover,.toc-item:focus { color: var(--orange-bright); outline: 1px dashed var(--orange-dim); outline-offset: 2px; }
  .toc-item.active { color: var(--orange-bright); }
  .toc-item.active .toc-num { color: var(--orange-bright); }
  .toc-num { color: var(--text-dim); margin-right: 12px; min-width: 30px; font-size: 11px; }
  .toc-dots { flex: 1; height: 1px; border-bottom: 1px dashed var(--border); margin: 0 10px; position: relative; top: -3px; }

  /* ── SECTIONS ── */
  .section { margin-bottom: 50px; }
  .section-header { border-bottom: 1px solid var(--orange); padding-bottom: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 14px; }
  .section-num { font-size: 11px; color: var(--text-dim); letter-spacing: 0.2em; border: 1px solid var(--orange-dim); padding: 2px 8px; flex-shrink: 0; }
  .section-title { font-size: 15px; letter-spacing: 0.15em; color: var(--orange-bright); text-shadow: 0 0 12px rgba(200,120,32,0.4); text-transform: uppercase; }
  .section-content { font-family:'Courier Prime','Courier New',monospace; font-size:13px; line-height:1.8; color:var(--text); }
  .section-content p { margin-bottom: 14px; }
  .subsection { margin: 24px 0; padding: 16px; border-left: 2px solid var(--orange-dim); background: rgba(200,120,32,0.03); }
  .subsection-title { font-family:'Share Tech Mono',monospace; font-size:12px; letter-spacing:0.2em; color:var(--orange-bright); margin-bottom:12px; display:flex; align-items:center; gap:8px; }
  .subsection-title::before { content:'▸'; color:var(--text-dim); }
  .evidence-list { list-style:none; padding:0; }
  .evidence-list li { padding:8px 0; border-bottom:1px dashed var(--border); display:flex; gap:12px; font-family:'Courier Prime',monospace; font-size:13px; line-height:1.6; }
  .evidence-list li::before { content:'►'; color:var(--text-dim); flex-shrink:0; margin-top:2px; }
  .callout { border:1px solid var(--orange); padding:16px 20px; margin:20px 0; background:var(--orange-faint); position:relative; box-shadow:0 0 20px rgba(200,120,32,0.05); }
  .callout-label { position:absolute; top:-8px; left:12px; background:var(--bg); padding:0 8px; font-size:10px; letter-spacing:0.3em; color:var(--orange-bright); font-family:'Share Tech Mono',monospace; }
  .callout-content { font-family:'Courier Prime',monospace; font-size:13px; line-height:1.8; font-style:italic; color:var(--orange-bright); }

  /* ── REDACTED ── */
  .redacted {
    background: var(--orange-dim); color: transparent; padding: 0 4px;
    cursor: pointer; transition: all 0.3s; user-select: none;
    border-radius: 1px;
    position: relative;
  }
  .redacted[data-revealed="true"] { background: transparent; color: var(--orange-bright); cursor: default; }
  .redacted:focus { outline: 2px dashed var(--orange-bright); outline-offset: 2px; }
  .redacted:not([data-revealed="true"])::after {
    content: 'REDACTED';
    position: absolute; left: 0; top: 0; width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
    color: var(--bg); font-size: 9px; letter-spacing: 0.2em;
    pointer-events: none;
  }

  .intervention { margin-bottom:20px; border:1px solid var(--border-bright); padding:16px; background:rgba(0,0,0,0.3); }
  .intervention-header { display:flex; align-items:center; gap:10px; margin-bottom:10px; }
  .priority-badge { background:var(--orange); color:var(--bg); font-size:9px; padding:2px 8px; letter-spacing:0.15em; font-family:'Share Tech Mono',monospace; font-weight:bold; }
  .intervention-title { font-family:'Share Tech Mono',monospace; font-size:12px; letter-spacing:0.15em; color:var(--orange-bright); }

  /* ── FOOTER ── */
  .doc-footer { border-top:1px solid var(--orange); padding-top:24px; margin-top:60px; text-align:center; }
  .signature { font-size:28px; font-family:'Courier Prime',monospace; font-style:italic; color:var(--orange-bright); text-shadow:0 0 20px var(--orange); margin:16px 0; }
  .footer-stamps { display:flex; justify-content:center; gap:30px; margin-top:20px; flex-wrap:wrap; }
  .stamp { border:2px solid var(--orange-dim); padding:8px 20px; font-size:11px; letter-spacing:0.3em; color:var(--orange-dim); text-transform:uppercase; opacity:0.6; }
  .stamp:nth-child(1){transform:rotate(-2deg)}.stamp:nth-child(2){transform:rotate(1.5deg)}.stamp:nth-child(3){transform:rotate(-1deg)}

  /* ── STATUSBAR ── */
  .statusbar {
    position:fixed; bottom:0; left:0; right:0; height:28px;
    background:var(--bg); border-top:1px solid var(--border-bright);
    display:flex; align-items:center; justify-content:space-between;
    padding:0 20px; z-index:998; font-size:10px; color:var(--text-dim); letter-spacing:0.15em;
  }
  @media (max-width: 600px) {
    .statusbar { padding: 0 10px; font-size: 9px; }
    .statusbar .hide-mobile { display: none; }
  }

  /* ── ANIMATIONS ── */
  .glitch { position:relative; }
  .glitch::before,.glitch::after { content:attr(data-text); position:absolute; top:0;left:0;width:100%;height:100%; }
  .glitch::before { animation:g1 4s infinite; color:var(--orange-bright); clip-path:inset(0 0 70% 0); }
  .glitch::after { animation:g2 4s infinite; color:var(--orange-dim); clip-path:inset(70% 0 0 0); }
  @keyframes g1{0%,95%,100%{transform:translate(0)}97%{transform:translate(-3px,1px)}}
  @keyframes g2{0%,95%,100%{transform:translate(0)}97%{transform:translate(3px,-1px)}}
  .cur::after { content:'█'; animation:cb 1.2s step-end infinite; color:var(--orange-bright); font-size:12px; }
  @keyframes cb{0%,100%{opacity:1}50%{opacity:0}}
  .hr { border:none; border-top:1px dashed var(--border-bright); margin:30px 0; }
  .note { font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--text-dim); letter-spacing:0.1em; border-left:2px solid var(--border-bright); padding-left:12px; margin:14px 0; }
  .tag { display:inline-block; font-family:'Share Tech Mono',monospace; font-size:9px; padding:2px 7px; letter-spacing:0.15em; border:1px solid var(--orange-dim); color:var(--orange-dim); margin-right:6px; vertical-align:middle; }

  @keyframes fadeIn { from{opacity:0} to{opacity:1} }

  /* ── DIORAMA ── */
  .diorama { margin:28px 0; border:1px solid var(--border-bright); background:#050300; position:relative; overflow:hidden; }
  .diorama-label { height:24px; background:rgba(200,120,32,0.08); border-bottom:1px solid var(--border); display:flex; align-items:center; padding:0 12px; gap:8px; font-size:9px; letter-spacing:0.3em; color:var(--text-dim); }
  .diorama-label b { color:var(--orange-bright); }
  .diorama canvas { display:block; width:100%; }
  .diorama-caption { padding:8px 14px; font-size:10px; letter-spacing:0.1em; color:var(--text-dim); border-top:1px solid var(--border); font-family:'Share Tech Mono',monospace; line-height:1.6; }
  .diorama-caption em { color:var(--orange); font-style:normal; }

  /* Canvas aria description (hidden visually, available to SR) */
  .sr-only {
    position:absolute; width:1px; height:1px; padding:0; margin:-1px;
    overflow:hidden; clip:rect(0,0,0,0); border:0;
  }

  /* SIERRA hover hint pulse */
  .sierra-hint {
    position:absolute; bottom:32px; left:50%; transform:translateX(-50%);
    font-size:9px; letter-spacing:0.2em; color:var(--orange-dim);
    animation:hintPulse 2.5s ease-in-out infinite;
    pointer-events:none; white-space:nowrap;
  }
  @keyframes hintPulse { 0%,100%{opacity:0.3} 50%{opacity:0.85} }

  /* ── BOOT SEQUENCE ── */
  #boot-screen {
    position:fixed; inset:0; background:#000; z-index:9999;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    font-family:'Share Tech Mono','Courier New',monospace;
    font-size:14px; color:#c87820; letter-spacing:0.2em;
    transition:opacity 0.8s ease;
  }
  #boot-screen.fade-out { opacity:0; pointer-events:none; }
  #boot-screen::before {
    content:'';
    position:absolute; inset:0;
    background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.25) 2px,rgba(0,0,0,0.25) 4px);
    pointer-events:none;
  }
  .boot-lines { text-align:left; max-width:600px; width:90%; }
  .boot-line { margin:3px 0; opacity:0; animation:bootfade 0.15s ease forwards; }
  @keyframes bootfade { to{opacity:1} }
  .boot-cursor { display:inline-block; width:10px; height:14px; background:#c87820; vertical-align:bottom; animation:cb 0.8s step-end infinite; margin-left:2px; }
  .boot-logo {
    font-size:11px; letter-spacing:0.5em; color:#e8922a;
    text-shadow:0 0 20px #c87820;
    margin-bottom:32px; opacity:0;
    animation:bootfade 0.5s ease 0.2s forwards;
  }
  .boot-progress-bar {
    width:300px; height:2px; background:#1a0e00; margin-top:28px;
    border:1px solid #3d2508; overflow:hidden; opacity:0;
    animation:bootfade 0.3s ease forwards;
  }
  .boot-progress-fill { height:100%; background:#c87820; width:0%; transition:width 0.05s linear; }

  /* ── SCROLL REVEAL ── */
  .reveal-section {
    opacity:0; transform:translateY(18px);
    transition:opacity 0.55s ease, transform 0.55s ease;
  }
  .reveal-section.visible { opacity:1; transform:translateY(0); }

  /* ── MARGIN ANNOTATIONS ── */
  .annotated { position:relative; }
  .margin-note {
    position:absolute;
    right:calc(100% + 18px);
    top:0;
    width:130px;
    font-family:'Courier Prime','Courier New',monospace;
    font-size:11px;
    line-height:1.5;
    color:#b06010;
    opacity:0.82;
    pointer-events:none;
    border-left:2px solid #7a4a10;
    padding-left:8px;
    font-style:italic;
  }
  .margin-note::before {
    content:'↳';
    display:block;
    font-style:normal;
    font-size:10px;
    color:#7a4a10;
    margin-bottom:2px;
  }
  /* Right-side margin notes */
  .margin-note.right {
    right:auto;
    left:calc(100% + 18px);
    border-left:none;
    border-right:2px solid #7a4a10;
    padding-left:0;
    padding-right:8px;
  }
  .margin-note.right::before { content:'↲'; }
  @media (max-width:1100px) { .margin-note { display:none; } }

  /* ── CIRCLED WORDS — hand-drawn marker style ── */
  .circled {
    display:inline-block;
    position:relative;
    padding:0 4px;
    white-space:nowrap;
  }
  .circled svg {
    position:absolute;
    inset:-7px -10px;
    width:calc(100% + 20px);
    height:calc(100% + 14px);
    pointer-events:none;
    overflow:visible;
  }
  .circled svg path {
    fill:none;
    stroke:#d42010;
    stroke-width:2.4;
    stroke-linecap:round;
    stroke-linejoin:round;
    opacity:0.58;
    stroke-dasharray:1000;
    stroke-dashoffset:1000;
    animation:circledraw 0.6s ease-out forwards;
  }
  @keyframes circledraw {
    to { stroke-dashoffset: 0; }
  }

  /* ── GLOSSARY ── */
  #glossary-panel {
    position:fixed; top:36px; right:0; width:320px; height:calc(100vh - 64px);
    background:#060300; border-left:1px solid #3d2508;
    z-index:900; overflow-y:auto;
    transform:translateX(100%);
    transition:transform 0.35s ease;
    font-family:'Share Tech Mono','Courier New',monospace;
  }
  #glossary-panel.open { transform:translateX(0); }
  #glossary-panel::-webkit-scrollbar { width:4px; }
  #glossary-panel::-webkit-scrollbar-track { background:#080500; }
  #glossary-panel::-webkit-scrollbar-thumb { background:#3d2508; }
  .glossary-header {
    position:sticky; top:0;
    background:#060300; border-bottom:1px solid #3d2508;
    padding:12px 16px; display:flex; justify-content:space-between; align-items:center;
    font-size:10px; letter-spacing:0.3em; color:#e8922a;
  }
  .glossary-close {
    background:none; border:1px solid #3d2508; color:#c87820;
    font-family:'Share Tech Mono',monospace; font-size:12px;
    padding:2px 8px; cursor:pointer; letter-spacing:0.1em;
  }
  .glossary-close:hover { border-color:#c87820; }
  .glossary-entry { border-bottom:1px dashed #2a1a06; padding:14px 16px; }
  .glossary-term {
    font-size:11px; letter-spacing:0.2em; color:#e8922a;
    margin-bottom:6px; display:flex; align-items:center; gap:8px;
  }
  .glossary-term .g-tag {
    font-size:8px; border:1px solid #3d2508; color:#7a4a10;
    padding:1px 5px; letter-spacing:0.1em;
  }
  .glossary-def {
    font-family:'Courier Prime','Courier New',monospace;
    font-size:11px; line-height:1.7; color:#957030;
  }
  .glossary-bishop {
    margin-top:8px; font-size:10px; color:#7a4a10;
    border-left:2px solid #3d2508; padding-left:8px;
    font-style:italic; font-family:'Courier Prime',monospace;
  }
  /* Glossary toggle button */
  #glossary-toggle {
    position:fixed; top:50%; right:0; transform:translateY(-50%);
    background:#060300; border:1px solid #3d2508; border-right:none;
    color:#c87820; font-family:'Share Tech Mono',monospace;
    font-size:9px; letter-spacing:0.2em;
    writing-mode:vertical-rl; text-orientation:mixed;
    padding:14px 8px; cursor:pointer; z-index:901;
    transition:background 0.2s, border-color 0.2s;
  }
  #glossary-toggle:hover { background:#0d0600; border-color:#c87820; color:#e8922a; }
</style>
</head>
<body>

<!-- ── BOOT SEQUENCE ── -->
<div id="boot-screen" aria-hidden="true">
  <div class="boot-logo">△ VANTAGE SYSTEMS AUTHORITY △</div>
  <div class="boot-lines" id="boot-lines"></div>
  <div class="boot-progress-bar" id="boot-bar"><div class="boot-progress-fill" id="boot-fill"></div></div>
</div>

<!-- ── GLOSSARY PANEL ── -->
<button id="glossary-toggle" aria-label="Open field glossary" aria-expanded="false">FIELD GLOSSARY</button>
<aside id="glossary-panel" aria-label="Field glossary" aria-hidden="true">
  <div class="glossary-header">
    <span>▸ FIELD GLOSSARY — BISHOP</span>
    <button class="glossary-close" id="glossary-close" aria-label="Close glossary">✕ CLOSE</button>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">ITF <span class="g-tag">CORE</span></div>
    <div class="glossary-def">Interdimensional Transit Frame. A structure within the portal that manipulates the fabric of reality itself — folding spacetime so passage from Point A to Point B is instantaneous. Also theorized to constitute the "gap" between points.</div>
    <div class="glossary-bishop">The ITF is not a tunnel. It is a fold. Nobody in Command seems to understand the distinction.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">ANCHOR LOCK <span class="g-tag">MECHANICAL</span></div>
    <div class="glossary-def">The system responsible for ensuring subjects arrive at intended coordinates. Stabilizes reality shear during transit and holds the portal aperture structurally coherent. Without it, destination matching degrades and shear goes unchecked.</div>
    <div class="glossary-bishop">Think of it as the thing that makes sure you arrive as yourself, in the right place. When it fails, neither of those is guaranteed.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">REALITY SHEAR <span class="g-tag">PHENOMENON</span></div>
    <div class="glossary-def">Geometric stress imposed on a transiting object — specifically the structural stress caused by irregularities in the object's form passing through the ITF. Three distinct components: subject-level, environmental, and temporal. Operationally collapsed into one category. This is a mistake.</div>
    <div class="glossary-bishop">You are the object. The shear is the stress on your geometry. It compounds. Nobody is tracking it properly.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">QUANTUM DECOHERENCE <span class="g-tag">PHYSICS</span></div>
    <div class="glossary-def">When a quantum system loses its superposition, returning to its classical state. In portal context: reality shear is decoherence. As Diamond phrased it — "reality will eventually realize that you are not meant to have exited the ITF in that configuration, and your body naturally returns to its original state before transit."</div>
    <div class="glossary-bishop">Diamond's phrasing is uncharacteristically poetic for someone who claims not to understand what the system does.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">NEGATIVE ENERGY <span class="g-tag">THEORETICAL</span></div>
    <div class="glossary-def">A theoretical state where energy falls below that of a vacuum — below empty space. Observed macroscopically in the Casimir effect. Has a repulsive gravitational effect. Theorized to be present in the ITF throat between portals.</div>
    <div class="glossary-bishop">We have always called it "the Kyros effect." I think we were observing negative energy the entire time without knowing what we were looking at.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">CASIMIR EFFECT <span class="g-tag">PHYSICS</span></div>
    <div class="glossary-def">An attractive physical force acting between two uncharged, closely spaced conducting plates in a vacuum. Negative energy exists in the gap between these plates. The portal system may operate on an analogous principle — Point A and Point B as the "plates," the ITF throat as the gap.</div>
    <div class="glossary-bishop">This is the model I keep coming back to. The geometry fits.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">MINKOWSKI BUBBLE <span class="g-tag">THEORETICAL</span></div>
    <div class="glossary-def">A self-consistent structure connecting two normal spacetimes in which time flows normally, light travels normally, and all physical laws apply. Theorized as the mechanism by which a properly tuned negative energy field creates a safe passage through the ITF throat — eliminating reality shear by canceling spacetime curvature to zero inside the bubble.</div>
    <div class="glossary-bishop">If this is achievable, it would solve the shear problem entirely. I think it is achievable. I could be wrong.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">PIEZOELECTRIC ACTUATORS <span class="g-tag">MECHANICAL / SPECULATIVE</span></div>
    <div class="glossary-def">Ceramic devices converting electrical energy into nanometer-level linear motion via the inverse piezoelectric effect — voltage causes controlled material deformation. Theorized (by Bishop) as the mechanism for tuning negative energy density in the ITF throat by adjusting the effective plate separation, exponentially altering the Casimir-like field.</div>
    <div class="glossary-bishop">I worked with these on the Bullet Train project. Nanometer adjustments producing enormous force — exactly what you'd need to tune something this sensitive. I have no confirmation this is what the ITF uses. It is what I would have used.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">VOID LAYER <span class="g-tag">THEORETICAL</span></div>
    <div class="glossary-def">The atemporal medium between timelines through which ITF transit occurs. No sequential time. No spatial geometry. No experiential content. Theorized to be the native environment of SIERRA.</div>
    <div class="glossary-bishop">You cannot remember it because you cannot form memories without sequential time. The Void does not provide it. You were not there. You were nowhere.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">THE BULLET TRAIN <span class="g-tag">HISTORICAL / PERSONAL</span></div>
    <div class="glossary-def">A large-scale transit system resembling a monorail, capable of carrying up to 500 personnel. Used for instantaneous displacement during the period when teleportation was considered too unstable and faster-than-light travel was not viable. High maintenance overhead but operationally successful. Bishop worked on this project.</div>
    <div class="glossary-bishop">It worked. We kept it running with constant attention. That's the part people forget — it worked because we never stopped watching it.</div>
  </div>

  <div class="glossary-entry">
    <div class="glossary-term">SIERRA <span class="g-tag">CLASSIFIED</span></div>
    <div class="glossary-def">Entity in permanent quantum superposition across dimensional boundaries. Native to the Void layer. Direct observation is theorized to be existentially fatal to SIERRA — not a disturbance, but a collapse from which it cannot recover.</div>
    <div class="glossary-bishop">It does not cross the boundary because it cannot. It interacts from within. That is not weakness. That is the only way it can exist at all.</div>
  </div>
</aside>

<a class="skip-link" href="#main-content">SKIP TO CONTENT</a>

<div class="topbar" role="banner">
  <div class="topbar-title glitch" data-text="△ VANTAGE SYSTEMS AUTHORITY — CLASSIFIED TERMINAL △" id="topbar-title" title="Click to skip typewriter animation" tabindex="0" role="button" aria-label="VSA Classified Terminal — click to skip animation">△ VANTAGE SYSTEMS AUTHORITY — CLASSIFIED TERMINAL △</div>
  <div class="topbar-right" aria-label="Terminal status">
    <span class="hide-mobile">USER: AUTHORIZED</span>
    <span class="hide-mobile">CLEARANCE: LEVEL-2</span>
    <span class="sdot">● SIGNAL: STRONG</span>
  </div>
</div>

<main id="main-content">
<div class="container">
  <div class="doc-header" role="region" aria-label="Document header">
    <div style="text-align:center;font-size:10px;letter-spacing:0.25em;color:var(--text-dim);margin-bottom:14px;">LAST UPDATED — 02 / 22 / 2026</div>
    <div class="doc-title">SURVEYOR FIELD RESEARCH NOTES</div>
    <div class="doc-subtitle">Comprehensive Edition — Ongoing Revision</div>
    <div class="meta-grid" role="table" aria-label="Document metadata">
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">AUTHOR</div><div class="meta-value" role="cell">Surveyor Bishop</div></div>
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">CLEARANCE</div><div class="meta-value" role="cell">Unfiled / Personal Research</div></div>
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">DISTRIBUTION</div><div class="meta-value" role="cell">NOT ALLOWED</div></div>
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">STATUS</div><div class="meta-value cur" role="cell">Working Document</div></div>
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">CLEARANCE</div><div class="meta-value" role="cell">Level-1</div></div>
      <div class="meta-item" role="row"><div class="meta-label" role="rowheader">CLASSIFICATION</div><div class="meta-value" role="cell">Personal Research</div></div>
    </div>
    <div class="warning-banner" role="alert">⚠ DISTRIBUTION NOT ALLOWED — CLEARANCE LEVEL-1 — RETAINED FOR PERSONAL RECORD ⚠</div>
  </div>

  <nav class="toc" aria-label="Table of contents">
    <a class="toc-item" href="#s0" data-section="s0"><span class="toc-num">00.</span> Prefatory Note<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s1" data-section="s1"><span class="toc-num">01.</span> What the Portal Is Not<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s2" data-section="s2"><span class="toc-num">02.</span> The Informational Transfer Model<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s25" data-section="s25"><span class="toc-num">02.5</span> The Throat — Negative Energy &amp; Minkowski<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s3" data-section="s3"><span class="toc-num">03.</span> The Transition Interface and the Void Layer<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s4" data-section="s4"><span class="toc-num">04.</span> The Exchange Hypothesis<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s5" data-section="s5"><span class="toc-num">05.</span> Reality Shear: Complete Model<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s6" data-section="s6"><span class="toc-num">06.</span> SIERRA<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s7" data-section="s7"><span class="toc-num">07.</span> On the VSA's Understanding<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s8" data-section="s8"><span class="toc-num">08.</span> Proposed Corrections<span class="toc-dots" aria-hidden="true"></span></a>
    <a class="toc-item" href="#s9" data-section="s9"><span class="toc-num">09.</span> The Identity Problem<span class="toc-dots" aria-hidden="true"></span></a>
  </nav>

  <!-- S0 -->
  <section class="section reveal-section" id="s0" aria-labelledby="title-s0">
    <div class="section-header"><div class="section-num">00</div><div class="section-title" id="title-s0">Prefatory Note</div></div>
    <div class="section-content">
      <p>I want to be clear about what this document is and what it is not. It is not a formal report. It will not be submitted. It will not be reviewed, stamped, filed, or added to the operational record. I am a Surveyor at Site 4. I am not a researcher. I do not attend briefings. I have corridor access and observation time and that is the extent of my institutional position as it relates to what follows.</p>
      <div class="callout"><div class="callout-label">PURPOSE STATEMENT</div><div class="callout-content">What this document is: everything I actually think is happening with the ITF portal system, written down in one place, in enough detail that if something goes wrong — whoever finds this will have a head start on understanding why.</div></div>
      <p>I have been building this model incrementally from field observations, incident reports, personnel accounts, and things I have overheard that I was not meant to hear. I do not have access to the engineering documentation. I have not been given the incident records from <span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span> in any complete form. What I have is pattern recognition, a surveyor's habit of measuring what is actually there rather than what the map says should be there, and the persistent irritation of watching an organization treat repeatable phenomena as random malfunctions.</p>
      <p>Diamond and the research team are working on the same problems. I know this because I listen. Researcher Zale gave what I am told was an extremely good explanation of the spacetime mechanics involved — someone who was in the room relayed it to me afterward — and it confirmed most of what I had already concluded independently. The researchers understand the physics. What I am less certain about is whether they understand the full scope of what they are operating. That is the gap this document is attempting to fill.</p>
      <p>I have been wrong before. I have acknowledged it, corrected my model, and continued. These are my conclusions. All of them. In order.</p>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S1 -->
  <section class="section reveal-section" id="s1" aria-labelledby="title-s1">
    <div class="section-header"><div class="section-num">01</div><div class="section-title" id="title-s1">What the Portal Is Not</div></div>
    <div class="section-content">
      <p>The portal is described as a gateway. A spatial connection between two points. The official definition I have heard used is that the aperture is the singularity point at the opening of the portal — "like a camera lens," as a researcher put it. That description is accurate as far as it goes. What it does not address is what happens between the lens on one end and the lens on the other. That gap is where everything interesting and dangerous is occurring.</p>

      <div class="diorama" role="img" aria-labelledby="d1-caption">
        <div class="diorama-label">DIAGRAM 01 — <b>TRANSIT MODEL COMPARISON</b> — <b style="color:#e8922a">CLICK TO PLAY</b></div>
        <canvas id="d1" height="190" aria-hidden="true"></canvas>
        <p class="sr-only">Animated diagram comparing two transit models. Left side shows Command's tunnel model: a figure moving continuously through a tube from Point A to Point B with traversal memory and geometric interior. Right side shows observed behavior: instantaneous replacement with no traversal, no interior, and no perceived path — the figure disappears at Point A and reappears at Point B with a flash, separated by nothing.</p>
        <div class="diorama-caption" id="d1-caption">LEFT: Command's "tunnel" model — continuous spatial path, traversal memory, geometric interior. RIGHT: <em>Observed behavior — instantaneous replacement. No traversal. No interior. No path.</em></div>
      </div>

      <div class="callout"><div class="callout-label">KEY OBSERVATION</div><div class="callout-content">Nobody who has passed through the ITF describes traversing anything. They describe being at Point A. They describe being at Point B. Between these two descriptions there is nothing. That is not transit through a tunnel. That is <em>replacement</em>.</div></div>
      <div class="note">▸ Researchers have confirmed no known limit on simultaneous transit volume — the ITF has been used for full Cohort movements. Current repair and upgrade work is oriented toward making it reliably capable of handling large groups, which suggests the architecture supports it but the stability does not yet. This tracks with everything else I know about how the system behaves under load.</div>

      <div class="subsection">
        <div class="subsection-title">Interior Geometric Inconsistency</div>
        <p class="annotated"><span class="margin-note">repeatable. consistent. fixed. this is not noise — this is the system behaving exactly as it was designed to</span>The interior geometry is consistently wrong across multiple independent accounts. "Depth didn't line up." This is not a malfunction. A malfunction is intermittent. The geometric interior inconsistency is consistent, repeatable, and present across every transit event where a subject is paying close enough attention to notice it. It is a fixed property of the system.</p>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S2 -->
  <section class="section reveal-section" id="s2" aria-labelledby="title-s2">
    <div class="section-header"><div class="section-num">02</div><div class="section-title" id="title-s2">The Informational Transfer Model</div></div>
    <div class="section-content">
      <p>The portal does not move matter through space in any conventional sense. A researcher confirmed this directly: it connects two places to allow instantaneous transit. That description is correct. What it elides is the mechanism — the portal is not a tube. There is no spatial path between the aperture at Point A and the aperture at Point B. What I believe happens is that the complete physical and quantum-informational state of whatever enters is encoded at the aperture, the original configuration is terminated, and that state is reconstructed at the destination. Transit is not movement. It is replacement.</p>

      <div class="diorama" role="img" aria-labelledby="d2-caption">
        <div class="diorama-label">DIAGRAM 02 — <b>STATE CAPTURE & RECONSTRUCTION CYCLE</b> — ANIMATED</div>
        <canvas id="d2" height="200" aria-hidden="true"></canvas>
        <p class="sr-only">Animated pipeline diagram showing five stages: Matter at Point A → Encode at aperture → Data state in Void Layer → Rebuild at Point B → Matter arrived. A particle travels between nodes to show the active stage, with descriptive text below indicating the current phase of the state transfer cycle.</p>
        <div class="diorama-caption" id="d2-caption">Subject enters aperture → matter is <em>encoded as quantum-informational data</em> → original configuration terminated at Point A → state reconstructed at Point B from available matter.</div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Evidentiary Basis</div>
        <ul class="evidence-list" aria-label="Evidence supporting informational transfer model">
          <li><strong>Zero perceived transit time.</strong> If you are moving through space, even very quickly, there is some interval. There is none here.</li>
          <li><strong>Absent traversal memory.</strong> Subjects do not remember moving. You cannot form traversal memories if there is no traversal.</li>
          <li><strong>Geometric interior inconsistency.</strong> The transition interface is geometrically wrong because it is not a geometric space. It is a process.</li>
          <li><strong>Temporal echo phenomena.</strong> A technician heard his own voice return through comms with a measurable delay, containing statements he had not consciously formed.</li>
          <li><strong>Catastrophic disappearance events.</strong> No debris. No biological trace. The original was already gone. There was nothing left to leave behind.</li>
        </ul>
      </div>
      <div class="subsection">
        <div class="subsection-title">The Power Source — Kyros Environment</div>
        <p>The negative energy conditions on Kyros are not incidental. The extreme cold produces a macroscopic Casimir-like field that provides the stabilizing mechanism the portal requires. The original designers chose this location deliberately.</p>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S2.5 -->
  <section class="section reveal-section" id="s25" aria-labelledby="title-s25">
    <div class="section-header"><div class="section-num">02.5</div><div class="section-title" id="title-s25">The Throat — Negative Energy &amp; the Minkowski Solution</div></div>
    <div class="section-content">

      <p class="annotated">
        <span class="margin-note">this is the part I keep coming back to — the geometry fits too well to be coincidence</span>
        The ITF does not move matter through space. It folds space. Between Point A and Point B there is a gap — a region I am calling <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 12,22 C 10,10 28,4 50,4 C 72,4 92,10 94,22 C 96,34 80,40 58,40 C 36,40 14,36 12,22" style="animation-delay:0.00s"/></svg>the throat</span> — that is neither location. What happens inside the throat determines whether transit is survivable in any meaningful sense of that word.
      </p>

      <div class="callout"><div class="callout-label">WORKING PREMISE</div><div class="callout-content">Frame the portal as a Casimir setup. Point A and Point B are the conducting plates. The throat is the gap between them. Negative energy — the same phenomenon observed between Casimir plates — exists in that gap. This is not metaphor. I believe it is the literal operating principle of the ITF.</div></div>

      <div class="subsection">
        <div class="subsection-title">What Negative Energy Does Here</div>
        <p class="annotated">
          <span class="margin-note right">repulsive gravitational effect — pushing against reality itself. this is why shear happens when there isn't enough of it</span>
          Negative energy has a <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 8,20 C 8,8 26,3 50,3 C 74,3 94,8 95,20 C 96,32 78,38 50,38 C 24,38 7,33 8,20 Z M 9,21 C 9,12 26,5 50,5" style="animation-delay:0.12s"/></svg>repulsive gravitational effect</span>. In the throat, it acts as a force pushing against the fabric of spacetime — against "reality itself," if you want to be imprecise about it. When there is sufficient negative energy density in the throat, this repulsion stabilizes the passage. When there is not, the environment of the throat destabilizes the transiting subject. This destabilization is what we call reality shear. The shear is not a malfunction. It is the absence of an adequate stabilizing field.
        </p>
        <p>The ITF produces quantum decoherence — reality shear — when the negative energy density in the throat is insufficient to deflect the geometric stress of transit. The subject passes through an environment that cannot support them in their current configuration. Their quantum state begins to return to its pre-transit baseline. I overheard Diamond put it to one of the junior researchers this way: <em>"reality will eventually realize that you are not meant to have exited the ITF in that configuration, and your body naturally returns to its original state before transit."</em> I wrote it down immediately. It is the clearest description of the mechanism I have heard from anyone in that lab, and Diamond said it in the hallway like it was obvious.</p>
      </div>

      <div class="subsection">
        <div class="subsection-title">The Minkowski Bubble — Proposed Solution</div>
        <p class="annotated">
          <span class="margin-note">I think this is achievable. I could be wrong. I have been wrong before. But the model is internally consistent and I cannot find a flaw in it.</span>
          A <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 14,24 C 12,12 30,5 52,5 C 74,5 90,12 90,24 C 90,36 74,41 52,41 C 30,41 13,35 14,24" style="animation-delay:0.24s"/></svg>Minkowski bubble</span> is a self-consistent structure connecting two normal spacetimes. Inside it, time flows normally. Light travels normally. All physical laws apply without distortion. It is, in the most direct terms, a safety envelope for whatever passes through the throat.
        </p>
        <p>The mechanism is curvature. Insufficient negative energy density produces positive curvature inside the throat. Positive curvature is exactly the decoherence condition — the moment of reality shear. If we tune the negative energy density correctly, we can produce negative curvature. Negative curvature, properly calibrated, cancels the positive curvature. Net curvature approaches zero. Inside a zero-curvature region: a Minkowski bubble. The shear problem does not need to be managed. It is eliminated at the structural level.</p>
        <div class="callout"><div class="callout-label">THEORETICAL OUTCOME</div><div class="callout-content">Properly tuned negative energy density → negative curvature → cancellation of positive curvature → net gravitational force inside the throat approaches nil → Minkowski bubble → reality shear eliminated. The subject passes through a region that imposes no geometric stress on their configuration whatsoever.</div></div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Tuning the Density — Piezoelectric Speculation</div>
        <p class="annotated">
          <span class="margin-note right">I worked on this class of device for three years. Nanometer displacement producing kilonewton-level force. Precisely what you would need.</span>
          The question is how to tune negative energy density with the precision this requires. Remaining with the Casimir model: in a Casimir setup, the negative energy density in the gap between plates is exquisitely sensitive to plate separation. A nanometer-scale change in separation produces an exponential change in density. This is the mechanism.
        </p>
        <p>I do not have access to the ITF engineering documentation. I do not know what the VSA engineers used. What I can say is that if I were designing a system that required nanometer-scale controlled displacement with high speed and force, I would use <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 10,22 C 8,8 28,2 50,2 C 72,2 93,8 94,22 C 95,36 76,42 50,42 C 26,42 8,36 10,22 M 12,24 C 11,15 28,8 50,8" style="animation-delay:0.36s"/></svg>piezoelectric actuators</span>. Ceramic devices. They convert electrical signals directly into linear motion at nanometer precision via the inverse piezoelectric effect. You apply voltage. The material deforms. Controllably, repeatably, at extremely high speed.</p>
        <p>I worked with this class of device during the Bullet Train project. That system — a monorail-class transit platform capable of holding five hundred personnel — required continuous precision adjustment of its field geometry to maintain safe passage at operational speeds. The maintenance burden was significant. The system worked because we never stopped watching it and adjusting it. I believe the ITF requires the same philosophy and may use the same class of mechanism.</p>
        <div class="note">▸ This is speculation derived from pattern recognition and prior experience. I have not confirmed it. I am documenting it because if I am right, it implies something important: the throat can be actively managed in real time, and the shear problem has an engineering solution rather than just a monitoring solution.</div>
        <div class="note">▸ Side note: I heard two of Diamond's researchers arguing in the east corridor last week about plate geometry. One of them kept saying "it's a sensitivity problem, not a power problem." I do not know what system they were referring to. I wrote it down anyway.</div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Expanding the Throat</div>
        <p>A secondary implication of the Casimir model: if the negative energy density can be increased by reducing plate separation, it can also be increased by expanding the effective gap volume. A larger throat with a higher negative energy density would produce a more stable Minkowski bubble — better protection for larger subjects, heavier loads, or more complex quantum configurations. The Bullet Train moved five hundred people at once. The current ITF handles individual transits. The gap between those scales may be a negative energy density problem.</p>
      </div>

    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S3 -->
  <section class="section reveal-section" id="s3" aria-labelledby="title-s3">
    <div class="section-header"><div class="section-num">03</div><div class="section-title" id="title-s3">The Transition Interface and the Void Layer</div></div>
    <div class="section-content">
      <p>The interior of the portal is not a volume in any classical sense. What subjects experience is a coordinate mapping interface — a process that has no spatial interior. It is fundamentally non-spatial in nature.</p>

      <div class="diorama" role="img" aria-labelledby="d3-caption">
        <div class="diorama-label">DIAGRAM 03 — <b>THE VOID LAYER — ATEMPORAL MEDIUM</b> — <b style="color:#e8922a">CLICK TO PLAY</b></div>
        <canvas id="d3" height="230" aria-hidden="true"></canvas>
        <p class="sr-only">Animated vertical cross-section diagram showing three zones. Top: Timeline A with a sequential time arrow. Bottom: Timeline B. Middle: The Void Layer, rendered as a noisy textured band with dashed borders. An animated figure travels from top to bottom, fragmenting into scattered particles while inside the Void zone, then reconstituting upon exit — representing the dissolution of physical form and the absence of memory formation in an atemporal medium.</p>
        <div class="diorama-caption" id="d3-caption">The Void layer exists <em>between all timelines simultaneously</em>. Subject enters from above (Timeline A), dissolves into informational state, exits below (Timeline B). <em>No sequential time inside. No spatial geometry. No experiential content.</em></div>
      </div>

      <div class="callout"><div class="callout-label">INFORMATIONAL SINGULARITY</div><div class="callout-content">The pressure sensation subjects report at the threshold is the subjective experience of the encoding process. You are briefly not a physical object. You are a description of a physical object. Whether this is worse than being a physical object is a philosophical question I am not equipped to answer.</div></div>

      <div class="subsection">
        <div class="subsection-title">The Void Layer — Working Framework</div>
        <p>The transition interface appears to be a layer adjacent to all timelines simultaneously — not a different location within this timeline, but a layer between realities, accessible from any point in any timeline via the ITF aperture. The Void layer exists outside of time as it functions in normal spacetime. This is why subjects cannot form memories of the transition. Memory formation requires sequential time. The Void does not provide it.</p>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S4 -->
  <section class="section reveal-section" id="s4" aria-labelledby="title-s4">
    <div class="section-header"><div class="section-num">04</div><div class="section-title" id="title-s4">The Exchange Hypothesis</div></div>
    <div class="section-content">
      <p>A researcher stated clearly that the ITF is currently not capable of interdimensional travel. I wrote that word down. Currently. It is doing a significant amount of work in that sentence and I do not think the researcher intended it to. What follows is my attempt to account for the evidence that the word "currently" is either incorrect or more precisely defined than the operational documentation suggests.</p>
      <p>The exchange hypothesis: the portal uses the Void layer as an intermediary to exchange you with a version of yourself from an adjacent timeline who was at Point B at the corresponding moment. You are not reconstructed at the destination. You are swapped. The "you" that exits at Point B is not from Point B's timeline in the way they believe they are. The minor post-transit differences — the small things that come back slightly wrong — are not reconstruction errors. They are the signature of a different life.</p>

      <div class="diorama" role="img" aria-labelledby="d4-caption">
        <div class="diorama-label">DIAGRAM 04 — <b>PARALLEL TIMELINE EXCHANGE MECHANISM</b> — <b style="color:#e8922a">CLICK TO PLAY</b></div>
        <canvas id="d4" height="240" aria-hidden="true"></canvas>
        <p class="sr-only">Animated diagram depicting two parallel horizontal timelines labeled Alpha and Beta. Portal apertures appear at Point A on Timeline Alpha and Point B on Timeline Beta. Two figures — one on each timeline — converge toward a central Void layer, cross in the middle in a flash of light representing the instantaneous exchange, then continue to the opposite destinations. A status label below cycles through: Both at rest, Approaching boundary, Exchange in Void, Routing to destinations, Exchange complete.</p>
        <div class="diorama-caption" id="d4-caption">Two parallel timelines. <em>You</em> enter at Point A (Timeline α). Your adjacent-timeline counterpart is retrieved from Point B (Timeline β). Exchange occurs in the Void — atemporal, no duration. <em>Both versions believe they are themselves. Both are correct.</em></div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Minor Post-Transit Differences — Reframed</div>
        <p class="annotated"><span class="margin-note right">seams. not errors. the word matters.</span>Under reconstruction, minor differences are errors. Under the exchange hypothesis, these differences are not errors. They are <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 12,22 C 10,10 28,4 50,4 C 72,4 92,10 94,22 C 96,34 80,40 58,40 C 36,40 14,36 12,22" style="animation-delay:0.48s"/></svg>seams</span>. The version of you that exits lived a slightly different life. The small differences are not noise. They are the signature of a life that diverged at some point and converged again — almost completely but not quite.</p>
      </div>
      <div class="subsection">
        <div class="subsection-title">The Voice Echo — Void Overlap Event</div>
        <p>The technician, briefly in the Void, made contact with the version of himself from the parallel timeline who was about to take his place. Both versions existed in the Void simultaneously. The voice came through the overlap. They leaked backward through the boundary.</p>
        <div class="note">▸ This is significantly more unsettling than future-state bleedback. Unsettling and incorrect are not the same thing.</div>
        <div class="note">▸ If the ITF is genuinely not capable of interdimensional exchange, then the minor post-transit differences require a different explanation. I do not have one that satisfies me as much as this one does. I am noting the official position and continuing.</div>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S5 -->
  <section class="section reveal-section" id="s5" aria-labelledby="title-s5">
    <div class="section-header"><div class="section-num">05</div><div class="section-title" id="title-s5">Reality Shear — Complete Model</div></div>
    <div class="section-content">
      <p>I will start with what the researchers actually understand, because they are not wrong — they are incomplete. Researcher Zale's explanation, as relayed to me: a reality shear is produced when you mesh two areas with a topology that does not match geometrically. The spacetime curvature of one zone does not align with the curvature of another. The Einstein Tensor — the variable that gives the value of spacetime curvature in a region, how energy and velocity are distributed across it — reads differently on either side of the transit boundary. When those readings diverge beyond a stable threshold, the result is geometric strain at the interface. Reality shear.</p>
      <p>This is correct. This is also only part of the picture. Reality shear as the VSA uses the term is not a single phenomenon. It is at least three distinct but related phenomena that the operational terminology has collapsed into one category. You cannot fix one thing when the thing is actually three things.</p>

      <div class="diorama" role="img" aria-labelledby="d5-caption">
        <div class="diorama-label">DIAGRAM 05 — <b>REALITY SHEAR — THREE COMPONENT MODEL</b> — ANIMATED</div>
        <canvas id="d5" height="230" aria-hidden="true"></canvas>
        <p class="sr-only">Three-panel animated diagram. Left panel: Subject-level match degradation — two concentric circles representing baseline quantum signature and retrieved signature, showing progressive drift until mismatch is flagged in red. Center panel: Environmental stress accumulation — a distorting dot grid that becomes increasingly warped over transit events, with a percentage bar filling toward a danger threshold. Right panel: Temporal boundary thinning — two wavy lines representing past/future boundaries that thin and flutter with increasing integrity loss, with particle leakage appearing above the threshold.</p>
        <div class="diorama-caption" id="d5-caption"><em>LEFT:</em> Subject topology mismatch — baseline curvature signature vs retrieved. <em>CENTER:</em> Environmental Einstein Tensor drift across transit events — stress accumulates non-linearly. <em>RIGHT:</em> Temporal boundary thinning — undocumented third component.</div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Component One — Subject-Level Shear</div>
        <p>The subject's own spacetime topology — their quantum-informational configuration — must be compatible with the topology of the destination zone for transit to be stable. Under stress, this matching precision degrades. The system retrieves a version whose curvature signature is close but not exact. Minor divergence produces the small post-transit differences that get filed as "adjustment period." Major divergence produces subjects who are biologically viable — real people from real timelines — but not the one who entered.</p>
      </div>
      <div class="subsection">
        <div class="subsection-title">Component Two — Environmental Shear</div>
        <p>The spacetime curvature of a zone is not static. Each use of the ITF introduces stress into the local curvature field — the Einstein Tensor reading for the site shifts slightly with every transit event. This accumulation is not linear. Stress compounds. A site that begins with stable curvature readings will, without active recalibration, drift toward the conditions that make shear events common.</p>
        <p>Zone Nadir is the extreme case. The VSA operates a site there, and by all accounts it is the most shear-prone location in their operational portfolio — not because the ITF is poorly maintained there, but because the zone's own spacetime curvature is inherently unstable. Nadir does not need portal use to generate shear conditions. The curvature instability is environmental, pre-existing, and significant enough that shear events occur there with or without transit activity. I have not been to Nadir. From what I have heard from people who have, I am not in a hurry to go.</p>
      </div>
      <div class="subsection">
        <div class="subsection-title">Component Three — Temporal Shear <span class="tag">UNDOCUMENTED</span></div>
        <p>Every transit event creates a small temporal stress. Under accumulated stress, sufficiently thinned temporal boundaries create windows through which information — and potentially entities — from other points in time can interact with the present.</p>
        <div class="callout"><div class="callout-label">CRITICAL NOTE</div><div class="callout-content">This is not speculative extrapolation. It is the mechanism that <span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span> demonstrated at scale.</div></div>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S6 -->
  <section class="section reveal-section" id="s6" aria-labelledby="title-s6">
    <div class="section-header"><div class="section-num">06</div><div class="section-title" id="title-s6">SIERRA</div></div>
    <div class="section-content">
      <div class="subsection">
        <div class="subsection-title">What Is Confirmed</div>
        <ul class="evidence-list" aria-label="Confirmed facts about SIERRA">
          <li>SIERRA exists in a quantum superposition state that spans dimensional boundaries. This is the operational understanding within VSA, however poorly it is understood.</li>
          <li>Direct observation collapses SIERRA's superposition. For SIERRA this resolution appears to be catastrophic — not a measurement disturbance but an existential one.</li>
          <li>At least one technician reported a physical encounter with SIERRA near a portal highway. Diamond has stated this is impossible. The contradiction is publicly unresolved.</li>
        </ul>
      </div>

      <div class="diorama" style="position:relative;" role="img" aria-labelledby="d6-caption">
        <div class="diorama-label">DIAGRAM 06 — <b>SIERRA SUPERPOSITION STATE</b> — <b style="color:#e8922a">CLICK EYE ICON TO TOGGLE OBSERVATION</b></div>
        <canvas id="d6" height="240" aria-hidden="true"></canvas>

        <p class="sr-only">Interactive animated diagram. In its default state, SIERRA is shown as multiple overlapping ghosted figures across several parallel timeline bands, representing simultaneous existence in all timelines. Waveforms oscillate across the canvas. When the user hovers or touches the diagram, a collapse animation triggers: the overlapping forms converge, a red warning ring expands, and a critical coherence alert appears — simulating the existential risk of direct observation on SIERRA's superposition state.</p>
        <div class="diorama-caption" id="d6-caption">SIERRA's wavefunction spans all timelines simultaneously. <em>Move mouse over diagram to simulate observation — watch superposition collapse.</em> Full manifestation is not difficult for SIERRA. It is existentially fatal.</div>
      </div>

      <div class="subsection">
        <div class="subsection-title">Void Layer Interpretation</div>
        <p>The most parsimonious explanation for an entity in permanent superposition across all timelines is that it is native to the medium between timelines — the Void layer itself. Full manifestation is not difficult for SIERRA. It is existentially fatal. This explains why SIERRA interacts through the boundary rather than crossing it. Not inability. Not restraint. <strong>Survival.</strong></p>
      </div>
      <div class="subsection">
        <div class="subsection-title"><span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span> — Recharacterized</div>
        <p>The <span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span> incident was not an attack. It was a resonance event. The Anchor Lock failure produced an uncontrolled opening into the Void layer — an aperture connecting to the medium between timelines rather than to a specific timeline's Point B. When the aperture opened into the Void directly, SIERRA achieved momentary coherence. Not because SIERRA forced its way through. Because the door opened into the room where SIERRA already was.</p>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S7 -->
  <section class="section reveal-section" id="s7" aria-labelledby="title-s7">
    <div class="section-header"><div class="section-num">07</div><div class="section-title" id="title-s7">On the VSA's Understanding of This System</div></div>
    <div class="section-content">
      <div class="callout"><div class="callout-label">CONCLUSION</div><div class="callout-content">The VSA did not develop this technology.</div></div>
      <p>The calibration requirements, the environmental prerequisites, the Anchor Lock architecture, the specific location selection — all reflect design decisions made by someone who understood what the system was. The original designers built the ITF around the Void layer exchange model. They knew about temporal shear. They chose Kyros deliberately.</p>
      <p>The VSA's <em>public</em> operational model treats the portal as a spatial gateway. Files collapse events as equipment failure. Does not account for temporal shear. Does not understand the Void layer. Whether the private model is more accurate, I cannot say with certainty. What I can say is that Diamond's team is actively investigating — the research division is not idle, and Command is clearly pushing for solutions. The issue is that they are looking for engineering fixes to what they believe are engineering problems. If the fundamental model is wrong, the fixes will not hold.</p>
      <p>I have watched Diamond brief a room full of command officers and use language that suggested a far more sophisticated understanding than what appears in official documentation. Either Diamond understands more than gets written down, or Diamond is also working from incomplete information and filling gaps with good intuition. Either possibility is interesting. Neither is reassuring.</p>
      <div class="note">▸ Diamond may be genuinely incorrect rather than deliberately dishonest. Deliberate deception would produce different errors — errors of omission, not fundamental mischaracterization. That said: I cannot rule out deliberate deception in the case of <span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span> specifically. And Diamond was in the room for that one.</div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S8 -->
  <section class="section reveal-section" id="s8" aria-labelledby="title-s8">
    <div class="section-header"><div class="section-num">08</div><div class="section-title" id="title-s8">Proposed Corrections</div></div>
    <div class="section-content">

      <div class="diorama" role="img" aria-labelledby="d7-caption">
        <div class="diorama-label">DIAGRAM 07 — <b>CUMULATIVE SHEAR WITHOUT CONTINUOUS MONITORING</b> — ANIMATED</div>
        <canvas id="d7" height="165" aria-hidden="true"></canvas>
        <p class="sr-only">Animated line chart showing cumulative shear accumulation over transit events on the X axis and shear percentage on the Y axis. The line curves upward non-linearly, crossing a red danger threshold between scheduled maintenance windows marked as vertical dashed lines. The chart demonstrates that calendar-based maintenance fires too infrequently and that the threshold is crossed invisibly between windows.</p>
        <div class="diorama-caption" id="d7-caption">Calendar-based maintenance (vertical markers) fires at fixed intervals regardless of actual stress. <em>Threshold is crossed invisibly between windows.</em> Monitoring must be continuous and threshold-triggered.</div>
      </div>

      <div class="intervention">
        <div class="intervention-header"><div class="priority-badge">PRIORITY 1</div><div class="intervention-title">Timeline-Match Anchoring</div></div>
        <p>Establish a complete quantum-state baseline prior to transit. The Anchor Lock broadcasts this as a continuous constraint throughout the exchange, ensuring the retrieved version matches the entering subject as closely as the available timeline pool permits.</p>
      </div>
      <div class="intervention">
        <div class="intervention-header"><div class="priority-badge">PRIORITY 2</div><div class="intervention-title">Temporal Offset Correction</div></div>
        <p>Anchor Lock calibration must include a temporal component currently absent from all operational procedures. An active dampening signal cancels temporal feedback before it can amplify. Amplified temporal feedback was the mechanism that produced <span class="redacted" tabindex="0" role="button" aria-label="Redacted text — press Enter or click to reveal" title="Click or press Enter to reveal">FALSE START</span>.</p>
      </div>
      <div class="intervention">
        <div class="intervention-header"><div class="priority-badge">PRIORITY 3</div><div class="intervention-title">Cumulative Shear Monitoring with Mandatory Recalibration</div></div>
        <p>Continuous monitoring at portal sites with recalibration triggered by threshold crossing rather than time elapsed.</p>
      </div>
      <div class="intervention">
        <div class="intervention-header"><div class="priority-badge">PRIORITY 4</div><div class="intervention-title">Exchange Verification Protocol</div></div>
        <p>Establish a quantum signature baseline pre-transit, perform comparative analysis post-transit. Subjects outside expected variance should be flagged for counseling — not because they are dangerous, but because they deserve accurate information.</p>
        <div class="note">▸ I recognize this intervention will not be implemented. I am documenting it anyway because the ethical case is clear.</div>
      </div>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <!-- S9 -->
  <section class="section reveal-section" id="s9" aria-labelledby="title-s9">
    <div class="section-header"><div class="section-num">09</div><div class="section-title" id="title-s9">The Identity Problem</div></div>
    <div class="section-content">
      <p class="annotated"><span class="margin-note">I have thought about this more than I would like to admit. I do not have a satisfying answer. I am not sure one exists.</span>If the portal exchanges you with a version of yourself from a parallel timeline, then the person who exits is not you in any strict physical continuity sense. They are you in every practical sense — same memories, same relationships, same body to within <span class="circled"><svg aria-hidden="true" viewBox="0 0 100 44" preserveAspectRatio="none"><path d="M 8,20 C 8,8 26,3 50,3 C 74,3 94,8 95,20 C 96,32 78,38 50,38 C 24,38 7,33 8,20 Z M 9,21 C 9,12 26,5 50,5" style="animation-delay:0.60s"/></svg>detection threshold</span>. But they are not the person who entered.</p>

      <div class="diorama" role="img" aria-labelledby="d8-caption">
        <div class="diorama-label">DIAGRAM 08 — <b>IDENTITY CONTINUITY ACROSS TRANSIT</b> — <b style="color:#e8922a">CLICK TO PLAY</b></div>
        <canvas id="d8" height="220" aria-hidden="true"></canvas>
        <p class="sr-only">Animated branching diagram. A figure approaches from the left along Timeline Alpha. At the portal aperture, the path splits into two branches: an upper branch labeled "You (Beta) — exits at Point B, adjacent timeline version" in bright orange, and a lower dashed branch labeled "You (Alpha) — routed to Beta timeline as their counterpart." A small animated figure travels the upper path, while the original figure disappears into the portal. Text at the bottom reads: Both versions believe they went in and came out. Neither is lying. Neither is exactly right.</p>
        <div class="diorama-caption" id="d8-caption">Every person who has ever used the ITF has had this experience without knowing it. <em>The discontinuity is real regardless.</em> They believe they went in and came out. They are not lying. They genuinely do not know.</div>
      </div>

      <div class="callout"><div class="callout-label">FINAL OBSERVATION</div><div class="callout-content">Whether this constitutes survival, death, or something that has no existing category is a question I am documenting but not attempting to answer. It is above my current philosophy. It may be above anyone's current philosophy.</div></div>
      <p>Command knows this or should know this. I am writing this down because someone should have.</p>
    </div>
  </section>

  <div class="hr" aria-hidden="true"></div>

  <section class="section reveal-section" aria-label="Closing statement">
    <div class="section-content">
      <p>These are my conclusions. All of them. In the most complete form I have been able to assemble them.</p>
      <p>If I am right — and I think I am right — then the ITF portal system is a Void-layer exchange mechanism operating on temporal and dimensional principles its current operators do not fully understand, producing effects they are misclassifying, managed with calibration practices that are systematically insufficient, and exhibiting failure modes that have already produced at least one catastrophic incident filed as equipment failure and not investigated at the level it requires.</p>
      <p>The people using this system deserve better than that. The people who disappeared into it and did not come back deserved better than that. Command will investigate — Diamond's team is on it, officially, with resources and access I do not have. That is good. That is better than nothing.</p>
      <p>But I had time. And I have the same information they have, minus the clearance and plus the willingness to say plainly what the evidence suggests. So I wrote it down. Mostly to think it through. Partly because if Diamond is wrong about something, someone should have the alternate model written up somewhere. And partly, if I am honest, because it is something to do.</p>
    </div>
  </section>

  <div class="doc-footer">
    <div class="signature" aria-label="Signed: B">— B</div>
    <div class="footer-stamps" aria-label="Document stamps">
      <div class="stamp">Under Review</div>
    </div>
    <div style="margin-top:24px;font-size:11px;color:var(--text-dim);letter-spacing:0.15em;line-height:2;">
      <p>If found: return to Bishop.</p>
      <p>If Bishop is not available: read it anyway.</p>
    </div>
  </div>
</div>
</main>

<div class="statusbar" role="status" aria-live="polite">
  <span>SYSTEM STATUS: OPERATIONAL</span>
  <span class="hide-mobile">18 FILES LOADED</span>
  <span class="hide-mobile">MEM: 53.9%</span>
  <span>SYSTEM</span>
</div>

<script>
'use strict';
// ── HELPERS ──────────────────────────────────────────────────────────────
const C = { O:'#c87820', OB:'#e8922a', OD:'#7a4a10', OF:'#3d2508', BG:'#050300', R:'#ff3300' };
function a(hex,op){const r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);return `rgba(${r},${g},${b},${op})`;}

// Canvas setup — respects devicePixelRatio
function setup(id){
  const cv=document.getElementById(id);
  if(!cv) return null;
  const dpr=window.devicePixelRatio||1;
  const W=cv.parentElement.clientWidth||840;
  const H=cv.height;
  cv.width=W*dpr; cv.height=H*dpr;
  const ctx=cv.getContext('2d');
  ctx.scale(dpr,dpr);
  return{cv,ctx,W,H};
}
function fig(ctx,x,y,alpha,col){
  ctx.save();ctx.globalAlpha=alpha;ctx.strokeStyle=col||C.OB;ctx.lineWidth=1.5;
  ctx.shadowColor=col||C.OB;ctx.shadowBlur=alpha>0.5?8:2;
  ctx.beginPath();ctx.arc(x,y-10,5,0,Math.PI*2);ctx.stroke();
  ctx.beginPath();ctx.moveTo(x,y-5);ctx.lineTo(x,y+6);ctx.moveTo(x-5,y-1);ctx.lineTo(x+5,y-1);ctx.moveTo(x,y+6);ctx.lineTo(x-4,y+15);ctx.moveTo(x,y+6);ctx.lineTo(x+4,y+15);ctx.stroke();
  ctx.restore();
}
function portal(ctx,x,y,w,h,col,t){
  ctx.save();ctx.strokeStyle=col;ctx.lineWidth=2;ctx.shadowColor=col;ctx.shadowBlur=10+5*Math.sin(t||0);
  ctx.beginPath();ctx.ellipse(x,y,w,h,0,0,Math.PI*2);ctx.stroke();
  const g=ctx.createRadialGradient(x,y,0,x,y,Math.max(w,h));
  g.addColorStop(0,a(col,0.2));g.addColorStop(1,'transparent');
  ctx.fillStyle=g;ctx.beginPath();ctx.ellipse(x,y,w,h,0,0,Math.PI*2);ctx.fill();
  ctx.restore();
}

// ── INTERSECTION OBSERVER — pause offscreen canvases ─────────────────────
const animationHandles = {};
const canvasActive = {};
const canvasPaused = {}; // for click-to-play canvases

// Delta-time: use real elapsed ms so speed is device-independent
let lastFrameTime = performance.now();
function getDelta() {
  const now = performance.now();
  const dt = Math.min((now - lastFrameTime) / 1000, 0.05); // cap at 50ms
  lastFrameTime = now;
  return dt;
}

// Speed constant: animations use this instead of hardcoded increments
// e.g. t += SPEED * dt  (SPEED replaces the old magic number * 60fps assumption)
const ANIM_SPEED = 60; // matches original 60fps feel

function registerCanvas(id, drawFn, clickToPlay) {
  const el = document.getElementById(id);
  if (!el) return;
  canvasActive[id] = false;
  canvasPaused[id] = !!clickToPlay;

  if (clickToPlay) {
    // Create an HTML overlay button that sits over the canvas — no extra canvas space
    const wrapper = el.closest('.diorama');
    if (wrapper) {
      // Make diorama position:relative (already is) and canvas wrapper relative
      el.style.display = 'block';

      const overlay = document.createElement('div');
      overlay.id = id + '-overlay';
      overlay.style.cssText = `
        position:absolute;
        inset:24px 0 0 0;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        gap:10px;
        pointer-events:none;
        z-index:10;
      `;

      const btn = document.createElement('button');
      btn.id = id + '-playbtn';
      btn.setAttribute('aria-label', 'Play diagram animation');
      btn.style.cssText = `
        background:rgba(8,5,0,0.75);
        border:1px solid #7a4a10;
        color:#c87820;
        font-family:'Share Tech Mono',monospace;
        font-size:11px;
        letter-spacing:0.25em;
        padding:10px 22px;
        cursor:pointer;
        pointer-events:auto;
        display:flex;
        align-items:center;
        gap:10px;
        transition:border-color 0.2s, color 0.2s;
      `;
      btn.innerHTML = `<svg width="12" height="14" viewBox="0 0 12 14" fill="currentColor"><polygon points="0,0 12,7 0,14"/></svg> PLAY DIAGRAM`;

      btn.addEventListener('mouseenter', () => { btn.style.borderColor='#c87820'; btn.style.color='#e8922a'; });
      btn.addEventListener('mouseleave', () => { btn.style.borderColor='#7a4a10'; btn.style.color='#c87820'; });

      overlay.appendChild(btn);
      // Insert overlay inside diorama, after the canvas
      el.insertAdjacentElement('afterend', overlay);

      // Dark tint on canvas while paused
      el.style.opacity = '0.35';
      el.style.filter = 'brightness(0.6)';

      btn.addEventListener('click', () => {
        if (canvasPaused[id]) {
          // Start playing
          canvasPaused[id] = false;
          el.style.opacity = '';
          el.style.filter = '';
          // Pin to top-right corner inside canvas, above caption
          overlay.style.cssText = `
            position:absolute;
            top:28px;
            right:8px;
            bottom:auto;
            left:auto;
            display:flex;
            flex-direction:row;
            align-items:flex-start;
            justify-content:flex-end;
            pointer-events:none;
            z-index:10;
          `;
          btn.innerHTML = `<svg width="10" height="12" viewBox="0 0 10 12" fill="currentColor"><rect x="0" y="0" width="3" height="12"/><rect x="7" y="0" width="3" height="12"/></svg> PAUSE`;
          btn.setAttribute('aria-label', 'Pause diagram animation');
          if (!animationHandles[id + '_running']) {
            animationHandles[id + '_running'] = true;
            drawFn();
          }
        } else {
          // Pause
          canvasPaused[id] = true;
          el.style.opacity = '0.35';
          el.style.filter = 'brightness(0.6)';
          overlay.style.cssText = `
            position:absolute;
            inset:24px 0 0 0;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            gap:10px;
            pointer-events:none;
            z-index:10;
          `;
          btn.innerHTML = `<svg width="12" height="14" viewBox="0 0 12 14" fill="currentColor"><polygon points="0,0 12,7 0,14"/></svg> PLAY DIAGRAM`;
          btn.setAttribute('aria-label', 'Play diagram animation');
          animationHandles[id + '_running'] = false;
        }
      });
    }
  }

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      canvasActive[id] = entry.isIntersecting;
      if (entry.isIntersecting && !animationHandles[id + '_running'] && !canvasPaused[id]) {
        animationHandles[id + '_running'] = true;
        drawFn();
      }
    });
  }, { threshold: 0.1 });

  observer.observe(el);
}

// ── D1: TUNNEL vs REPLACEMENT ─────────────────────────────────────────────
(function initD1(){
  const s=setup('d1');
  if(!s) return;
  const{ctx,W,H}=s;
  let t=0, lastT=performance.now();
  function draw(){
    if(!canvasActive['d1']||canvasPaused['d1']){animationHandles['d1_running']=false;return;}
    const now=performance.now(), dt=Math.min((now-lastT)/1000,0.05); lastT=now;
    ctx.clearRect(0,0,W,H);
    t+=0.7*dt;
    const mid=W/2,pad=28,cy=H/2+8;

    ctx.save();ctx.strokeStyle=a(C.OF,0.8);ctx.lineWidth=1;ctx.setLineDash([4,6]);
    ctx.beginPath();ctx.moveTo(mid,10);ctx.lineTo(mid,H-10);ctx.stroke();ctx.setLineDash([]);ctx.restore();

    ctx.save();ctx.strokeStyle=C.OD;ctx.lineWidth=1;
    ctx.beginPath();ctx.moveTo(pad,cy-28);ctx.lineTo(mid-pad,cy-28);ctx.stroke();
    ctx.beginPath();ctx.moveTo(pad,cy+28);ctx.lineTo(mid-pad,cy+28);ctx.stroke();
    const tg=ctx.createLinearGradient(pad,0,mid-pad,0);
    tg.addColorStop(0,a(C.O,0.03));tg.addColorStop(.5,a(C.O,0.08));tg.addColorStop(1,a(C.O,0.03));
    ctx.fillStyle=tg;ctx.fillRect(pad,cy-28,mid-2*pad,56);ctx.restore();
    for(let i=1;i<6;i++){
      const fx=pad+i*(mid-2*pad)/6;
      ctx.save();ctx.strokeStyle=a(C.OD,0.12);ctx.lineWidth=1;
      ctx.beginPath();ctx.moveTo(fx,cy-28);ctx.lineTo(fx,cy+28);ctx.stroke();ctx.restore();
    }
    portal(ctx,pad+16,cy,12,28,C.OD,t);
    portal(ctx,mid-pad-16,cy,12,28,C.OD,t);
    const pos=(Math.sin(t*0.9)+1)/2;
    const fx=pad+32+pos*(mid-2*pad-64);
    for(let tr=4;tr>=1;tr--){
      const tp=Math.max(0,pos-tr*0.06);
      const tfx=pad+32+tp*(mid-2*pad-64);
      fig(ctx,tfx,cy+4,(5-tr)*0.07,C.O);
    }
    fig(ctx,fx,cy+4,1,C.OB);
    ctx.font='9px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.65);ctx.textAlign='center';
    ctx.fillText('[ COMMAND MODEL — "TUNNEL" ]',mid/2,H-10);
    ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.4);ctx.textAlign='left';
    ctx.fillText('A',pad+4,cy-32);ctx.textAlign='right';ctx.fillText('B',mid-pad-4,cy-32);

    const rl=mid+pad,rr=W-pad;
    const pAx=rl+52,pBx=rr-52;
    portal(ctx,pAx,cy,12,28,C.O,t);
    portal(ctx,pBx,cy,12,28,C.O,t);
    ctx.save();ctx.strokeStyle=a(C.OD,0.15);ctx.lineWidth=1;ctx.setLineDash([3,11]);
    ctx.beginPath();ctx.moveTo(pAx+14,cy);ctx.lineTo(pBx-14,cy);ctx.stroke();ctx.setLineDash([]);ctx.restore();

    const cyc=(t*0.38)%1;
    let showA=false,showB=false,flashA=false,flashB=false;
    let flashIntA=0,flashIntB=0;
    if(cyc<0.3){showA=true;}
    else if(cyc<0.38){flashA=true;flashIntA=Math.sin(((cyc-0.3)/0.08)*Math.PI);}
    else if(cyc<0.62){showB=true;}
    else if(cyc<0.7){flashB=true;flashIntB=Math.sin(((cyc-0.62)/0.08)*Math.PI);}
    else{showA=true;}

    if(showA) fig(ctx,pAx,cy,1,C.OB);
    if(showB) fig(ctx,pBx,cy,1,C.OB);

    if(flashA){
      ctx.save();ctx.shadowColor=C.OB;ctx.shadowBlur=24;ctx.globalAlpha=flashIntA*0.55;
      ctx.fillStyle=C.OB;ctx.beginPath();ctx.ellipse(pAx,cy,16,32,0,0,Math.PI*2);ctx.fill();ctx.restore();
      fig(ctx,pAx,cy,1-flashIntA,C.OB);
    }
    if(flashB){
      ctx.save();ctx.shadowColor=C.OB;ctx.shadowBlur=24;ctx.globalAlpha=flashIntB*0.55;
      ctx.fillStyle=C.OB;ctx.beginPath();ctx.ellipse(pBx,cy,16,32,0,0,Math.PI*2);ctx.fill();ctx.restore();
      fig(ctx,pBx,cy,flashIntB,C.OB);
    }

    let statusTxt='';
    if(showA) statusTxt='SUBJECT AT POINT A';
    else if(flashA) statusTxt='— INSTANTANEOUS —';
    else if(showB) statusTxt='SUBJECT AT POINT B';
    else if(flashB) statusTxt='— INSTANTANEOUS —';
    ctx.font='8px "Share Tech Mono"';
    ctx.fillStyle=a((flashA||flashB)?C.OB:C.OD,(flashA||flashB)?0.9:0.4);
    ctx.textAlign='center';ctx.fillText(statusTxt,(rl+rr)/2,cy+4);
    ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.4);ctx.textAlign='center';
    ctx.fillText('A',(pAx-8),cy-32);ctx.fillText('B',(pBx+8),cy-32);
    ctx.font='9px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.65);ctx.textAlign='center';
    ctx.fillText('[ OBSERVED BEHAVIOR — REPLACEMENT ]',mid+(W-mid)/2,H-10);

    requestAnimationFrame(draw);
  }
  registerCanvas('d1', draw, true);
})();

// ── D2: STATE CAPTURE ─────────────────────────────────────────────────────
(function initD2(){
  const s=setup('d2');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();
  const nodes=[
    {label:'MATTER',sub:'Point A',x:.1},
    {label:'ENCODE',sub:'Aperture',x:.3},
    {label:'{DATA}',sub:'Void Layer',x:.5},
    {label:'REBUILD',sub:'Point B',x:.72},
    {label:'MATTER',sub:'Arrived',x:.9},
  ];
  function draw(){
    if(!canvasActive['d2']){animationHandles['d2_running']=false;return;}
    ctx.clearRect(0,0,W,H);
    const _now=performance.now(),_dt=Math.min((_now-lastT)/1000,0.05);lastT=_now;
    t+=0.54*_dt;
    const cy=H/2-8;
    const phase=5;
    const cycleT=(t*.25)%phase;
    const activeP=Math.floor(cycleT);
    const pp=cycleT-activeP;
    for(let i=0;i<nodes.length-1;i++){
      const x1=nodes[i].x*W+26,x2=nodes[i+1].x*W-26;
      const active=i===activeP;
      ctx.save();
      ctx.strokeStyle=active?a(C.OB,.7+.3*Math.sin(t*4)):a(C.OF,1);
      ctx.lineWidth=active?2:1;
      ctx.beginPath();ctx.moveTo(x1,cy);ctx.lineTo(x2-8,cy);ctx.stroke();
      ctx.fillStyle=ctx.strokeStyle;
      ctx.beginPath();ctx.moveTo(x2-8,cy-4);ctx.lineTo(x2,cy);ctx.lineTo(x2-8,cy+4);ctx.fill();
      if(active){
        const px=x1+pp*(x2-x1);
        ctx.beginPath();ctx.arc(px,cy,3,0,Math.PI*2);
        ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=10;ctx.fill();
        for(let tr=1;tr<5;tr++){
          const tp=Math.max(0,pp-tr*.05);
          ctx.globalAlpha=(5-tr)*.06;
          ctx.beginPath();ctx.arc(x1+tp*(x2-x1),cy,2,0,Math.PI*2);ctx.fill();
        }
      }
      ctx.restore();
    }
    nodes.forEach((nd,i)=>{
      const nx=nd.x*W,active=i===activeP||i===activeP+1;
      ctx.save();
      ctx.beginPath();ctx.arc(nx,cy,24,0,Math.PI*2);
      ctx.strokeStyle=active?C.OB:C.OD;ctx.lineWidth=active?2:1;
      if(active){ctx.shadowColor=C.OB;ctx.shadowBlur=14;}
      ctx.stroke();
      if(active){const g=ctx.createRadialGradient(nx,cy,0,nx,cy,24);g.addColorStop(0,a(C.OB,.15));g.addColorStop(1,'transparent');ctx.fillStyle=g;ctx.fill();}
      ctx.font=`bold 9px "Share Tech Mono"`;ctx.fillStyle=active?C.OB:C.OD;ctx.textAlign='center';ctx.textBaseline='middle';
      ctx.fillText(nd.label,nx,cy-4);
      ctx.font=`7px "Share Tech Mono"`;ctx.fillStyle=a(active?C.OB:C.OD,.6);ctx.fillText(nd.sub,nx,cy+7);
      ctx.restore();
    });
    const descs=['Subject exists as physical matter at Point A.','Aperture captures quantum-informational state.','Matter terminated. Original is now pure data in Void.','Data broadcast to Point B. Reconstruction begins.','Subject exists as physical matter at Point B.'];
    ctx.font='9px "Share Tech Mono"';ctx.fillStyle=a(C.OB,.75);ctx.textAlign='center';ctx.textBaseline='alphabetic';
    ctx.fillText(descs[Math.min(activeP,4)],W/2,H-14);
    requestAnimationFrame(draw);
  }
  registerCanvas('d2', draw);
})();

// ── D3: VOID LAYER STACK ──────────────────────────────────────────────────
(function initD3(){
  const s=setup('d3');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();
  function draw(){
    if(!canvasActive['d3']||canvasPaused['d3']){animationHandles['d3_running']=false;return;}
    const now=performance.now(),dt=Math.min((now-lastT)/1000,0.05);lastT=now;
    ctx.clearRect(0,0,W,H);
    t+=0.66*dt;
    const pad=28,tlH=42,vT=tlH+22,vB=H-tlH-22;

    // Timeline A (top)
    ctx.save();ctx.fillStyle=a(C.OD,.12);ctx.fillRect(pad,8,W-2*pad,tlH);
    ctx.strokeStyle=C.OD;ctx.lineWidth=1;ctx.strokeRect(pad,8,W-2*pad,tlH);
    for(let x=pad+25;x<W-pad;x+=35){ctx.save();ctx.strokeStyle=a(C.OD,.25);ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(x,8);ctx.lineTo(x,8+tlH);ctx.stroke();ctx.restore();}
    ctx.font='9px "Share Tech Mono"';ctx.fillStyle=C.OD;ctx.textAlign='left';ctx.fillText('TIMELINE — POINT A  (sequential time →)',pad+8,8+26);
    ctx.restore();

    // Timeline B (bottom)
    ctx.save();ctx.fillStyle=a(C.OD,.12);ctx.fillRect(pad,vB+8,W-2*pad,tlH);
    ctx.strokeStyle=C.OD;ctx.lineWidth=1;ctx.strokeRect(pad,vB+8,W-2*pad,tlH);
    for(let x=pad+25;x<W-pad;x+=35){ctx.save();ctx.strokeStyle=a(C.OD,.25);ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(x,vB+8);ctx.lineTo(x,vB+8+tlH);ctx.stroke();ctx.restore();}
    ctx.font='9px "Share Tech Mono"';ctx.fillStyle=C.OD;ctx.textAlign='left';ctx.fillText('TIMELINE — POINT B  (sequential time →)',pad+8,vB+8+26);
    ctx.restore();

    // Void texture
    const vH=vB-vT;
    for(let x=pad;x<W-pad;x+=20){
      for(let y=vT;y<vB;y+=13){
        const n=Math.sin(x*.09+t*1.4)*Math.cos(y*.14+t*.85);
        if(Math.abs(n)>.38){ctx.beginPath();ctx.arc(x+n*5,y+n*3,.9,0,Math.PI*2);ctx.fillStyle=a(C.O,.05+Math.abs(n)*.05);ctx.fill();}
      }
    }
    ctx.save();ctx.strokeStyle=a(C.O,.25+.1*Math.sin(t*1.5));ctx.lineWidth=1;ctx.setLineDash([6,5]);
    ctx.strokeRect(pad,vT,W-2*pad,vH);ctx.setLineDash([]);
    ctx.font='bold 11px "Share Tech Mono"';ctx.fillStyle=a(C.O,.2+.08*Math.sin(t));ctx.textAlign='center';
    ctx.fillText('V O I D   L A Y E R  —  A T E M P O R A L',W/2,vT+vH*.42);
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.45);
    ctx.fillText('no sequential time  ·  no spatial geometry  ·  no experiential content',W/2,vT+vH*.57);
    ctx.restore();

    // Animation cycle:
    // cyc 0..0.15: figure at center of TL-A, waiting
    // cyc 0.15..0.35: figure descends from TL-A center into Void top
    // cyc 0.35..0.65: figure dissolves fully in Void
    // cyc 0.65..0.85: reconstituted figure emerges from Void bottom, walks to center of TL-B
    // cyc 0.85..1.0: figure at center of TL-B, waiting
    const cyc=(t*0.18)%1;
    const tlAcenter=8+tlH/2; // center y of timeline A
    const tlBcenter=vB+8+tlH/2; // center y of timeline B
    const figX=W/2;

    let py,inVoid=false,dissolve=0;

    if(cyc<0.15){
      // Waiting at A center
      py=tlAcenter;
    } else if(cyc<0.35){
      // Moving down from TL-A center to Void top
      const p=(cyc-0.15)/0.2;
      py=tlAcenter+p*(vT-tlAcenter);
    } else if(cyc<0.65){
      // In void - position eases from vT to vB
      const p=(cyc-0.35)/0.3;
      py=vT+p*(vB-vT);
      inVoid=true;
      // Dissolve: max at center of void
      dissolve=Math.sin(p*Math.PI);
    } else if(cyc<0.85){
      // Moving from Void bottom to TL-B center
      const p=(cyc-0.65)/0.2;
      py=vB+p*(tlBcenter-vB);
    } else {
      // Waiting at B center
      py=tlBcenter;
    }

    // Boundary flash when crossing into/out of void
    const nearTop=Math.abs(py-vT);
    const nearBot=Math.abs(py-vB);
    if(nearTop<12||nearBot<12){
      const fl=1-Math.min(1,Math.min(nearTop,nearBot)/12);
      ctx.save();ctx.globalAlpha=fl*0.55;
      ctx.beginPath();ctx.arc(figX,py,18,0,Math.PI*2);
      ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=28;ctx.fill();ctx.restore();
    }

    ctx.save();
    if(inVoid){
      const disp=dissolve*26;
      const numParticles=18;
      for(let p=0;p<numParticles;p++){
        const ang=(p/numParticles)*Math.PI*2+t*(p%2?1.1:-0.9);
        const r=disp*(.4+.6*Math.sin(p*2.3+t*1.3));
        const px2=figX+Math.cos(ang)*r;
        const py2=py+Math.sin(ang)*r*0.55;
        ctx.globalAlpha=0.6-dissolve*0.1;
        ctx.beginPath();ctx.arc(px2,py2,2,0,Math.PI*2);
        ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=7;ctx.fill();
      }
      // When entering (dissolve low) or leaving (dissolve low again), show partial figure
      if(dissolve<0.5){
        const alpha=1-dissolve*2;
        fig(ctx,figX,py,alpha,C.OB);
      }
    } else {
      fig(ctx,figX,py,1,C.OB);
    }
    ctx.restore();

    requestAnimationFrame(draw);
  }
  registerCanvas('d3', draw, true);
})();

// ── D4: TIMELINE EXCHANGE ─────────────────────────────────────────────────
(function initD4(){
  const s=setup('d4');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();

  // Layout: two horizontal timelines, Alpha on top, Beta on bottom
  // Left side = Point A zone, Right side = Point B zone
  // Void band runs vertically through the center

  function draw(){
    if(!canvasActive['d4']||canvasPaused['d4']){animationHandles['d4_running']=false;return;}
    const now=performance.now(),dt=Math.min((now-lastT)/1000,0.05);lastT=now;
    ctx.clearRect(0,0,W,H);
    t+=0.54*dt;

    const pad=20;
    const tlA=H*0.28; // y of timeline alpha
    const tlB=H*0.72; // y of timeline beta
    const voidX1=W*0.40; // void band left edge
    const voidX2=W*0.60; // void band right edge
    const voidCx=(voidX1+voidX2)/2;

    // A positions: figure starts at left side (Point A zone)
    const posA_left=pad+60;   // start position on alpha
    const posA_right=W-pad-60; // Point B side on alpha (unused target)
    const posB_left=pad+60;   // Point A side on beta (unused)
    const posB_right=W-pad-60; // Point B on beta

    // ── Background zone labels ──
    ctx.save();
    ctx.fillStyle=a(C.OD,0.05);
    ctx.fillRect(pad,pad,voidX1-pad*1.5,H-pad*2);   // Point A zone
    ctx.fillRect(voidX2+pad*0.5,pad,W-voidX2-pad*1.5,H-pad*2); // Point B zone
    ctx.restore();

    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.3);ctx.textAlign='center';
    ctx.fillText('◀  POINT A ZONE  ▶',(pad+voidX1)/2,14);
    ctx.fillText('◀  POINT B ZONE  ▶',(voidX2+W-pad)/2,14);

    // ── Void band ──
    const vg=ctx.createLinearGradient(voidX1,0,voidX2,0);
    vg.addColorStop(0,'transparent');
    vg.addColorStop(0.25,a(C.O,0.07));
    vg.addColorStop(0.5,a(C.O,0.12));
    vg.addColorStop(0.75,a(C.O,0.07));
    vg.addColorStop(1,'transparent');
    ctx.fillStyle=vg;ctx.fillRect(voidX1,pad,voidX2-voidX1,H-pad*2);

    // Void noise texture
    for(let vx=voidX1+4;vx<voidX2;vx+=14){
      for(let vy=pad+4;vy<H-pad;vy+=10){
        const n=Math.sin(vx*0.13+t*1.6)*Math.cos(vy*0.17+t*0.9);
        if(Math.abs(n)>0.45){
          ctx.beginPath();ctx.arc(vx+n*4,vy+n*2,0.8,0,Math.PI*2);
          ctx.fillStyle=a(C.O,0.06+Math.abs(n)*0.04);ctx.fill();
        }
      }
    }

    // Void border
    ctx.save();ctx.strokeStyle=a(C.O,0.2+0.08*Math.sin(t*1.5));ctx.lineWidth=1;ctx.setLineDash([5,4]);
    ctx.beginPath();ctx.moveTo(voidX1,pad);ctx.lineTo(voidX1,H-pad);ctx.stroke();
    ctx.beginPath();ctx.moveTo(voidX2,pad);ctx.lineTo(voidX2,H-pad);ctx.stroke();
    ctx.setLineDash([]);ctx.restore();
    ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.18+0.07*Math.sin(t));
    ctx.textAlign='center';ctx.fillText('VOID',voidCx,H/2+3);
    ctx.font='6px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.12);
    ctx.fillText('ATEMPORAL',voidCx,H/2+13);

    // ── Timeline Alpha (top) ──
    ctx.save();ctx.strokeStyle=a(C.OB,0.5);ctx.lineWidth=1.5;
    ctx.beginPath();ctx.moveTo(pad,tlA);ctx.lineTo(voidX1-4,tlA);ctx.stroke(); // left segment
    ctx.beginPath();ctx.moveTo(voidX2+4,tlA);ctx.lineTo(W-pad,tlA);ctx.stroke(); // right segment
    ctx.strokeStyle=a(C.OD,0.2);ctx.lineWidth=1;ctx.setLineDash([3,8]);
    ctx.beginPath();ctx.moveTo(voidX1+4,tlA);ctx.lineTo(voidX2-4,tlA);ctx.stroke(); // through void, dashed
    ctx.setLineDash([]);ctx.restore();
    // Timeline alpha tick marks
    for(let x=pad+20;x<W-pad;x+=24){
      if(x>voidX1-10&&x<voidX2+10) continue;
      ctx.save();ctx.strokeStyle=a(C.OD,0.18);ctx.lineWidth=0.5;
      ctx.beginPath();ctx.moveTo(x,tlA-4);ctx.lineTo(x,tlA+4);ctx.stroke();ctx.restore();
    }
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OB,0.55);ctx.textAlign='left';
    ctx.fillText('TIMELINE α',pad+4,tlA-10);

    // ── Timeline Beta (bottom) ──
    ctx.save();ctx.strokeStyle=a(C.O,0.5);ctx.lineWidth=1.5;
    ctx.beginPath();ctx.moveTo(pad,tlB);ctx.lineTo(voidX1-4,tlB);ctx.stroke();
    ctx.beginPath();ctx.moveTo(voidX2+4,tlB);ctx.lineTo(W-pad,tlB);ctx.stroke();
    ctx.strokeStyle=a(C.OD,0.2);ctx.lineWidth=1;ctx.setLineDash([3,8]);
    ctx.beginPath();ctx.moveTo(voidX1+4,tlB);ctx.lineTo(voidX2-4,tlB);ctx.stroke();
    ctx.setLineDash([]);ctx.restore();
    for(let x=pad+20;x<W-pad;x+=24){
      if(x>voidX1-10&&x<voidX2+10) continue;
      ctx.save();ctx.strokeStyle=a(C.OD,0.18);ctx.lineWidth=0.5;
      ctx.beginPath();ctx.moveTo(x,tlB-4);ctx.lineTo(x,tlB+4);ctx.stroke();ctx.restore();
    }
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.55);ctx.textAlign='left';
    ctx.fillText('TIMELINE β',pad+4,tlB-10);

    // ── Portals at the void boundary ──
    portal(ctx,voidX1,tlA,8,20,C.OB,t); // Alpha enters void from left
    portal(ctx,voidX2,tlB,8,20,C.O,t);  // Beta exits void to right

    // ── Animation phases ──
    // 0.00–0.20: Both figures at rest (Alpha at posA_left, Beta at posB_right)
    // 0.20–0.40: Alpha moves rightward toward void; Beta moves leftward toward void
    // 0.40–0.50: Both enter void, dissolve at center
    // 0.50–0.70: Exchange flash in void center, then re-emerge: Alpha now exits to posB_right; Beta exits to posA_left
    // 0.70–0.90: Alpha travels to posB_right on Beta's timeline; Beta travels to posA_left on Alpha's timeline
    // 0.90–1.00: Both at rest at new positions (exchanged)

    const cyc=(t*0.13)%1;

    let axPos, axY, axAlpha, bxPos, bxY, bxAlpha;
    let showExchangeFlash=false, flashInt=0;
    let statusLabel='';

    if(cyc<0.20){
      // At rest
      axPos=posA_left; axY=tlA; axAlpha=1;
      bxPos=posB_right; bxY=tlB; bxAlpha=1;
      statusLabel='BOTH AT REST — ALPHA AT POINT A, BETA AT POINT B';
    } else if(cyc<0.40){
      // Approaching void
      const p=(cyc-0.20)/0.20;
      axPos=posA_left+p*(voidX1-posA_left-14); axY=tlA; axAlpha=1;
      bxPos=posB_right-p*(posB_right-voidX2-14); bxY=tlB; bxAlpha=1;
      statusLabel='APPROACHING VOID BOUNDARY';
    } else if(cyc<0.50){
      // Entering void — dissolve toward center
      const p=(cyc-0.40)/0.10;
      axPos=voidX1-14+p*(voidCx-(voidX1-14)); axY=tlA+p*(H/2-tlA); axAlpha=1-p*0.4;
      bxPos=voidX2+14-p*(voidX2+14-voidCx); bxY=tlB-p*(tlB-H/2); bxAlpha=1-p*0.4;
      statusLabel='ENTERING VOID — MATTER ENCODING BEGINS';
    } else if(cyc<0.55){
      // Exchange moment — both at center, flash
      axPos=voidCx; axY=H/2; axAlpha=0;
      bxPos=voidCx; bxY=H/2; bxAlpha=0;
      flashInt=Math.sin((cyc-0.50)/0.05*Math.PI);
      showExchangeFlash=true;
      statusLabel='⚡ EXCHANGE IN VOID — NO DURATION — NO MEMORY ⚡';
    } else if(cyc<0.70){
      // Re-emerge: now alpha goes to Beta's side, beta goes to Alpha's side
      const p=(cyc-0.55)/0.15;
      axPos=voidCx+p*(posB_right-voidCx); axY=H/2+p*(tlB-H/2); axAlpha=p;
      bxPos=voidCx-p*(voidCx-posA_left); bxY=H/2-p*(H/2-tlA); bxAlpha=p;
      statusLabel='EXCHANGE COMPLETE — ROUTING TO DESTINATIONS';
    } else if(cyc<0.90){
      // Settling at new positions
      const p=(cyc-0.70)/0.20;
      axPos=posB_right; axY=tlB; axAlpha=1;
      bxPos=posA_left; bxY=tlA; bxAlpha=1;
      statusLabel='BOTH AT REST — ALPHA NOW AT POINT B, BETA AT POINT A';
    } else {
      axPos=posB_right; axY=tlB; axAlpha=1;
      bxPos=posA_left; bxY=tlA; bxAlpha=1;
      statusLabel='BOTH BELIEVE THEY ARE THEMSELVES. BOTH ARE CORRECT.';
    }

    // Draw exchange flash
    if(showExchangeFlash&&flashInt>0){
      ctx.save();
      ctx.globalAlpha=flashInt*0.6;
      const fg=ctx.createRadialGradient(voidCx,H/2,0,voidCx,H/2,50);
      fg.addColorStop(0,a(C.OB,0.9));fg.addColorStop(0.5,a(C.OB,0.3));fg.addColorStop(1,'transparent');
      ctx.fillStyle=fg;ctx.beginPath();ctx.arc(voidCx,H/2,50,0,Math.PI*2);ctx.fill();
      // Cross flash
      ctx.strokeStyle=C.OB;ctx.lineWidth=1;ctx.globalAlpha=flashInt*0.4;
      ctx.beginPath();ctx.moveTo(voidX1,tlA);ctx.lineTo(voidX2,tlB);ctx.stroke();
      ctx.beginPath();ctx.moveTo(voidX1,tlB);ctx.lineTo(voidX2,tlA);ctx.stroke();
      ctx.restore();
    }

    // Draw alpha figure (starts on α, ends on β after exchange)
    if(!showExchangeFlash&&axAlpha>0){
      const isOnBetaTimeline = cyc>0.54;
      fig(ctx,axPos,axY,axAlpha,isOnBetaTimeline?C.OB:C.OB);
      if(isOnBetaTimeline&&axAlpha>0.5){
        ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OB,axAlpha*0.7);ctx.textAlign='center';
        ctx.fillText('α',axPos,axY-28);
      }
    }
    // Draw beta figure (starts on β, ends on α after exchange)
    if(!showExchangeFlash&&bxAlpha>0){
      const isOnAlphaTimeline = cyc>0.54;
      fig(ctx,bxPos,bxY,bxAlpha,C.O);
      if(isOnAlphaTimeline&&bxAlpha>0.5){
        ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.O,bxAlpha*0.7);ctx.textAlign='center';
        ctx.fillText('β',bxPos,bxY-28);
      }
    }

    // Point A / B markers
    ctx.font='8px "Share Tech Mono"';ctx.textAlign='center';
    ctx.fillStyle=a(C.OD,0.4);
    ctx.fillText('POINT A',posA_left,H-12);
    ctx.fillText('POINT B',posB_right,H-12);

    // Status label
    ctx.font='8px "Share Tech Mono"';
    ctx.fillStyle=a(showExchangeFlash?C.OB:C.OD,showExchangeFlash?0.9:0.65);
    ctx.textAlign='center';
    ctx.fillText(statusLabel,W/2,H/2+(H/2-22));

    requestAnimationFrame(draw);
  }
  registerCanvas('d4', draw, true);
})();

// ── D5: REALITY SHEAR — 3 PANELS ─────────────────────────────────────────
(function initD5(){
  const s=setup('d5');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();
  function draw(){
    if(!canvasActive['d5']){animationHandles['d5_running']=false;return;}
    ctx.clearRect(0,0,W,H);
    const _nd5=performance.now(),_dd5=Math.min((_nd5-lastT)/1000,0.05);lastT=_nd5;
    t+=0.78*_dd5;
    const third=W/3,cy=H*.47;
    ctx.save();ctx.strokeStyle=a(C.OF,.9);ctx.lineWidth=1;
    ctx.beginPath();ctx.moveTo(third,18);ctx.lineTo(third,H-18);ctx.stroke();
    ctx.beginPath();ctx.moveTo(third*2,18);ctx.lineTo(third*2,H-18);ctx.stroke();ctx.restore();
    ['SUBJECT-LEVEL','ENVIRONMENTAL','TEMPORAL'].forEach((ti,i)=>{
      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=C.OD;ctx.textAlign='center';
      ctx.fillText(ti,third*i+third/2,17);
    });
    // P1
    {
      const cx=third*.5,R=22;
      const drift=(t*.2)%1;
      const bad=drift>.55;
      ctx.save();ctx.beginPath();ctx.arc(cx,cy,R,0,Math.PI*2);ctx.strokeStyle=C.OB;ctx.lineWidth=1.5;ctx.stroke();
      ctx.font='7px "Share Tech Mono"';ctx.fillStyle=C.OB;ctx.textAlign='center';ctx.fillText('BASELINE',cx,cy+4);ctx.restore();
      const sx=drift*20*Math.sin(t*.5),sy=drift*12*Math.cos(t*.35);
      ctx.save();ctx.strokeStyle=bad?a('#ff4444',.75):a(C.O,.65);ctx.lineWidth=1.5;ctx.setLineDash([4,3]);
      ctx.beginPath();ctx.arc(cx+sx,cy+sy,R*(1+drift*.4),0,Math.PI*2);ctx.stroke();ctx.setLineDash([]);
      ctx.font='7px "Share Tech Mono"';ctx.fillStyle=ctx.strokeStyle;ctx.textAlign='center';ctx.fillText(bad?'MISMATCH':'MATCH',cx+sx,cy+sy+4);ctx.restore();
      ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(bad?'#ff4444':C.OD,.7);ctx.textAlign='center';
      ctx.fillText(bad?'⚠ ADJACENT DEGRADED':'✓ WITHIN VARIANCE',cx,H-16);
    }
    // P2 — Environmental Shear: transit event log with compounding stress
    {
      const cx = third + third * 0.5;
      const panL = third + 8, panR = third*2 - 8, panT = 24, panB = H - 20;
      const panW = panR - panL, panH = panB - panT;

      // Slow cycle: 0→1 over ~12s, represents site accumulation across many uses
      const cycle = (t * 0.072) % 1;
      const danger = cycle > 0.68;

      // How many transit events have "occurred" so far in this cycle
      const maxEvents = 9;
      const eventsShown = Math.floor(cycle * maxEvents * 1.15); // slightly ahead of fill
      const eventsFilled = Math.min(maxEvents, eventsShown);

      // Color scheme
      const baseCol = danger ? '#ff4444' : C.O;
      const dimCol  = danger ? '#7a1a0a' : C.OD;

      // ── Transit event log — stacked rows ──
      // Each row = one transit event, shows:
      //   [event #]  [portal icon]  [shear added]  [total bar]
      const rowH = 18;
      const logT = panT + 12;
      const logL = panL + 6;
      const logR = panR - 6;
      const barW = 60;

      // Column x positions
      const colNum  = logL + 14;
      const colIcon = logL + 30;
      const colDelta= logR - barW - 28;
      const colBar  = logR - barW;

      // Header
      ctx.font = '6px "Share Tech Mono"';
      ctx.fillStyle = a(C.OD, 0.4);
      ctx.textAlign = 'left';
      ctx.fillText('EVENT', logL, logT - 2);
      ctx.fillText('+SHEAR', colDelta, logT - 2);
      ctx.fillText('CUMULATIVE', colBar, logT - 2);

      // Divider under header
      ctx.save();
      ctx.strokeStyle = a(C.OD, 0.25);
      ctx.lineWidth = 0.5;
      ctx.beginPath();
      ctx.moveTo(panL, logT + 2);
      ctx.lineTo(panR, logT + 2);
      ctx.stroke();
      ctx.restore();

      // Per-event shear values (non-linear — compounds)
      const shearAdds = [0.06, 0.08, 0.09, 0.10, 0.11, 0.13, 0.14, 0.15, 0.14];
      let cumulative = 0;
      const thresholdPct = 0.68;

      for (let i = 0; i < maxEvents; i++) {
        const ry = logT + 8 + i * rowH;
        if (ry + rowH > panB - 22) break;

        const eventNum = i + 1;
        const isVisible = i < eventsFilled;
        const isActive  = i === eventsFilled - 1 && cycle > 0; // most recent event
        const shear = shearAdds[i] || 0.10;
        cumulative += isVisible ? shear : 0;
        const cumPct = Math.min(1, cumulative);
        const isPast68 = cumPct > thresholdPct;

        const rowAlpha = isVisible ? (isActive ? 1 : 0.7) : 0.18;
        const rowCol   = isPast68 ? '#ff4444' : C.O;

        // Event number
        ctx.font = '7px "Share Tech Mono"';
        ctx.fillStyle = a(rowCol, rowAlpha * 0.6);
        ctx.textAlign = 'right';
        ctx.fillText(`${String(eventNum).padStart(2,'0')}`, colNum, ry + 6);

        // Small portal glyph
        if (isVisible) {
          const pulse = isActive ? 0.6 + 0.4*Math.sin(t * 4) : 0.5;
          ctx.save();
          ctx.strokeStyle = a(rowCol, rowAlpha * pulse);
          ctx.lineWidth = 1;
          ctx.shadowColor = rowCol;
          ctx.shadowBlur = isActive ? 6 : 0;
          ctx.beginPath();
          ctx.ellipse(colIcon, ry + 4, 4, 7, 0, 0, Math.PI*2);
          ctx.stroke();
          ctx.restore();
        }

        // +shear delta
        if (isVisible) {
          ctx.font = '7px "Share Tech Mono"';
          ctx.fillStyle = a(isPast68 ? '#ff4444' : C.OB, rowAlpha * 0.85);
          ctx.textAlign = 'left';
          ctx.fillText(`+${Math.round(shear*100)}%`, colDelta, ry + 6);
        }

        // Cumulative bar
        ctx.save();
        ctx.strokeStyle = a(C.OD, 0.2);
        ctx.lineWidth = 0.5;
        ctx.strokeRect(colBar, ry, barW, 8);
        if (isVisible) {
          const barFill = isPast68 ? '#ff3300' : C.O;
          ctx.fillStyle = barFill;
          ctx.globalAlpha = rowAlpha * 0.6;
          ctx.fillRect(colBar, ry, barW * cumPct, 8);
          ctx.globalAlpha = 1;
          // threshold marker at 68%
          ctx.strokeStyle = a('#ff4444', 0.5);
          ctx.lineWidth = 1;
          ctx.setLineDash([2,2]);
          ctx.beginPath();
          ctx.moveTo(colBar + barW * thresholdPct, ry - 1);
          ctx.lineTo(colBar + barW * thresholdPct, ry + 9);
          ctx.stroke();
          ctx.setLineDash([]);
        }
        ctx.restore();
      }

      // ── Bottom status ──
      const statusY = panB - 6;
      ctx.font = '7px "Share Tech Mono"';
      ctx.textAlign = 'center';
      if (danger) {
        const blink = Math.sin(t * 5) > 0;
        ctx.fillStyle = a('#ff4444', blink ? 0.9 : 0.5);
        ctx.fillText('⚠ THRESHOLD EXCEEDED — RECALIBRATION REQUIRED', cx, statusY);
      } else {
        ctx.fillStyle = a(C.OD, 0.6);
        ctx.fillText(`CUMULATIVE SITE SHEAR: ${Math.round(cycle * 100)}%  ·  THRESHOLD: 68%`, cx, statusY);
      }

      // ── Small note: non-linear compounding ──
      ctx.font = '6px "Share Tech Mono"';
      ctx.fillStyle = a(C.OD, 0.28);
      ctx.textAlign = 'center';
      ctx.fillText('STRESS IS NON-LINEAR — EACH EVENT COMPOUNDS THE LAST', cx, panT + 8);
    }
    // P3
    {
      const cx=third*2+third*.5;
      const thin=.5+.5*Math.sin(t*.45);
      const thick=3-thin*2.6;
      ctx.save();
      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.35);ctx.textAlign='center';
      ctx.fillText('PAST',cx,cy-46);ctx.fillText('PRESENT',cx,cy+5);ctx.fillText('FUTURE',cx,cy+54);
      ctx.strokeStyle=a(C.O,.3+thin*.35);ctx.lineWidth=thick;ctx.shadowColor=C.O;ctx.shadowBlur=thin*14;
      ctx.beginPath();ctx.moveTo(third*2+10,cy-18);
      for(let x=third*2+10;x<W-10;x+=4)ctx.lineTo(x,cy-18+thin*6*Math.sin(x*.22+t*3));
      ctx.stroke();
      ctx.beginPath();ctx.moveTo(third*2+10,cy+18);
      for(let x=third*2+10;x<W-10;x+=4)ctx.lineTo(x,cy+18+thin*6*Math.cos(x*.22+t*3));
      ctx.stroke();ctx.restore();
      if(thin>.68){
        const la=(thin-.68)/.32;
        for(let i=0;i<5;i++){
          const lx=third*2+20+(i/5)*(third-40)+Math.sin(t*1.4+i)*9;
          const ly=cy-35+Math.sin(t*2.2+i*1.4)*16;
          ctx.save();ctx.globalAlpha=la*.85;ctx.beginPath();ctx.arc(lx,ly,2,0,Math.PI*2);
          ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=9;ctx.fill();ctx.restore();
        }
        ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a('#ff4444',la*.8);ctx.textAlign='center';ctx.fillText('⚠ LEAKAGE',cx,cy-52);
      }
      ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.7);ctx.textAlign='center';
      ctx.fillText(`INTEGRITY ${Math.round((1-thin)*100)}%`,cx,H-16);
    }
    requestAnimationFrame(draw);
  }
  registerCanvas('d5', draw);
})();

// ── D6: SIERRA — EYE TOGGLE ──────────────────────────────────────────────
(function initD6(){
  const s=setup('d6');if(!s)return;
  const{cv,ctx,W,H}=s;
  let t=0,obs=false,col=0;

  // Remove mouse hover — toggle only via click/touch/keyboard
  cv.setAttribute('tabindex','0');
  cv.setAttribute('role','button');
  cv.setAttribute('aria-label','SIERRA superposition diagram. Click or press Enter to toggle observation mode.');
  cv.style.cursor='pointer';

  function toggleObs(){ obs=!obs; }
  cv.addEventListener('click', toggleObs);
  cv.addEventListener('touchstart',e=>{e.preventDefault();toggleObs();},{passive:false});
  cv.addEventListener('keydown',e=>{
    if(e.key==='Enter'||e.key===' '){e.preventDefault();toggleObs();}
  });

  // Draw eye icon at given position
  function drawEye(ex,ey,sz,open,alpha){
    ctx.save();ctx.globalAlpha=alpha;
    const pupilR=sz*0.28*(open?1:0);
    // Eye outline (almond shape)
    ctx.strokeStyle=open?C.OB:C.OD;ctx.lineWidth=1.5;
    ctx.shadowColor=open?C.OB:C.OD;ctx.shadowBlur=open?8:2;
    ctx.beginPath();
    ctx.moveTo(ex-sz,ey);
    ctx.bezierCurveTo(ex-sz,ey-sz*0.55,ex+sz,ey-sz*0.55,ex+sz,ey);
    ctx.bezierCurveTo(ex+sz,ey+sz*0.55,ex-sz,ey+sz*0.55,ex-sz,ey);
    ctx.closePath();ctx.stroke();
    // Iris
    if(open){
      ctx.strokeStyle=C.OB;ctx.lineWidth=1;
      ctx.beginPath();ctx.arc(ex,ey,sz*0.45,0,Math.PI*2);ctx.stroke();
      // Pupil
      ctx.fillStyle=C.OB;ctx.shadowBlur=10;
      ctx.beginPath();ctx.arc(ex,ey,pupilR,0,Math.PI*2);ctx.fill();
    } else {
      // Closed — just a line
      ctx.strokeStyle=C.OD;ctx.lineWidth=1.5;
      ctx.beginPath();ctx.moveTo(ex-sz*0.7,ey);ctx.lineTo(ex+sz*0.7,ey);ctx.stroke();
    }
    ctx.restore();
  }

  function draw(){
    if(!canvasActive['d6']){animationHandles['d6_running']=false;return;}
    ctx.clearRect(0,0,W,H);
    t+=0.013;
    col=obs?Math.min(1,col+.04):Math.max(0,col-.03);
    const sup=1-col;const cx=W/2,cy=H/2;

    // Timeline bands (fade as obs collapses)
    for(let i=0;i<7;i++){
      const y=18+(i/6)*(H-36);
      ctx.save();ctx.strokeStyle=a(C.OD,.18*sup);ctx.lineWidth=1;ctx.setLineDash([8,7]);
      ctx.beginPath();ctx.moveTo(28,y);ctx.lineTo(W-28,y);ctx.stroke();ctx.setLineDash([]);
      ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.18*sup);ctx.textAlign='right';
      ctx.fillText(`TL-${String.fromCharCode(65+i)}`,24,y+3);ctx.restore();
    }

    // Superposition waveforms
    for(let w=0;w<6;w++){
      const amp=(18+w*7)*sup;
      const freq=.02+w*.007;
      const ph=w*1.1+t*(.4+w*.18);
      ctx.save();ctx.strokeStyle=a(C.O,(.15+.12*w/6)*sup);ctx.lineWidth=1;
      ctx.beginPath();ctx.moveTo(28,cy);
      for(let x=28;x<W-28;x+=2)ctx.lineTo(x,cy+amp*Math.sin(x*freq+ph)*Math.cos(x*.005+t*.28));
      ctx.stroke();ctx.restore();
    }

    // SIERRA ghost figures (multi-timeline)
    const ghosts=Math.round(5*sup)+1;
    for(let g=0;g<ghosts;g++){
      const gx=cx+(g-ghosts/2)*18*sup;
      const gy=cy+Math.sin(t*.8+g)*10*sup;
      const isMain=g===Math.floor(ghosts/2);
      const ga=(isMain?.75:(.18*sup))*(0.55+.45*Math.sin(t*1.2+g));
      const sz=15-g*1.8*sup;
      ctx.save();ctx.globalAlpha=ga;ctx.strokeStyle=isMain?C.OB:C.O;ctx.lineWidth=1.3;
      ctx.shadowColor=isMain?C.OB:C.O;ctx.shadowBlur=6;
      ctx.beginPath();ctx.moveTo(gx-sz,gy);ctx.lineTo(gx+sz,gy);ctx.moveTo(gx,gy-sz);ctx.lineTo(gx,gy+sz);
      ctx.moveTo(gx-sz*.7,gy-sz*.7);ctx.lineTo(gx+sz*.7,gy+sz*.7);
      ctx.moveTo(gx+sz*.7,gy-sz*.7);ctx.lineTo(gx-sz*.7,gy+sz*.7);ctx.stroke();
      ctx.beginPath();ctx.arc(gx,gy,sz*.42,0,Math.PI*2);ctx.stroke();ctx.restore();
    }

    // Collapse ring when observing — constrained size so it doesn't reach eye
    if(col>0){
      ctx.save();ctx.globalAlpha=col*.5;
      ctx.beginPath();ctx.arc(cx,cy,28+col*8,0,Math.PI*2);
      ctx.strokeStyle='#ff3300';ctx.lineWidth=2;ctx.shadowColor='#ff3300';ctx.shadowBlur=14;ctx.stroke();
      ctx.restore();
      ctx.save();ctx.globalAlpha=col;
      ctx.font='bold 10px "Share Tech Mono"';ctx.fillStyle='#ff4444';ctx.textAlign='center';
      ctx.fillText('⚠ OBSERVATION DETECTED — SUPERPOSITION COLLAPSING',cx,18);ctx.restore();
    }

    // Status line — fixed at a known y above the eye zone
    ctx.font='9px "Share Tech Mono"';ctx.textAlign='center';
    const statusY=H-52;
    if(sup>.5){ctx.fillStyle=a(C.O,.55);ctx.fillText(`COHERENCE: ${Math.round(sup*100)}%  —  SPANNING ALL TIMELINES`,cx,statusY);}
    else{ctx.fillStyle=a('#ff4444',.8);ctx.fillText(`⚠ COLLAPSING — COHERENCE: ${Math.round(sup*100)}%  —  EXISTENTIAL RISK`,cx,statusY);}

    // Eye icon — pinned to bottom, clear gap below status
    const eyeX=cx, eyeY=H-26, eyeSize=10;
    drawEye(eyeX,eyeY,eyeSize,obs,obs?0.95:0.5);
    ctx.font='7px "Share Tech Mono"';ctx.textAlign='center';
    ctx.fillStyle=a(obs?'#ff4444':C.OD,obs?0.85:0.45);
    ctx.fillText(obs?'[ OBSERVING — CLICK TO STOP ]':'[ CLICK EYE TO OBSERVE ]',cx,H-8);

    requestAnimationFrame(draw);
  }
  registerCanvas('d6', draw);
})();

// ── D7: SHEAR ACCUMULATION MONITOR ───────────────────────────────────────
(function initD7(){
  const s=setup('d7');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();
  function draw(){
    if(!canvasActive['d7']){animationHandles['d7_running']=false;return;}
    ctx.clearRect(0,0,W,H);
    const _nd7=performance.now(),_dd7=Math.min((_nd7-lastT)/1000,0.05);lastT=_nd7;
    t+=0.54*_dd7;
    const pad=32,gH=H-50,gW=W-2*pad,gX=pad,gY=10;
    ctx.save();ctx.strokeStyle=a(C.OF,.9);ctx.lineWidth=.5;
    for(let i=0;i<=4;i++){const y=gY+(i/4)*gH;ctx.beginPath();ctx.moveTo(gX,y);ctx.lineTo(gX+gW,y);ctx.stroke();ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.5);ctx.textAlign='right';ctx.fillText(`${100-i*25}%`,gX-4,y+3);}
    ctx.restore();
    ctx.save();ctx.fillStyle=a(C.R,.05);ctx.fillRect(gX,gY,gW,gH*.3);
    ctx.strokeStyle=a(C.R,.2);ctx.lineWidth=1;ctx.setLineDash([4,5]);
    ctx.beginPath();ctx.moveTo(gX,gY+gH*.3);ctx.lineTo(gX+gW,gY+gH*.3);ctx.stroke();ctx.setLineDash([]);
    ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.R,.4);ctx.textAlign='right';ctx.fillText('⚠ DANGER THRESHOLD',gX+gW-4,gY+gH*.3-4);ctx.restore();
    const pts=80;
    const vals=[];
    for(let i=0;i<pts;i++){let v=(i/pts)*(i/pts)*.75;v+=.07*Math.max(0,Math.sin(i*.42));v+=.045*Math.max(0,Math.sin(i*.71+1));vals.push(Math.min(1,v));}
    const shown=Math.min(pts,Math.floor(t*10));
    ctx.save();ctx.beginPath();
    for(let i=0;i<shown;i++){
      const x=gX+(i/pts)*gW,y=gY+gH-vals[i]*gH;
      i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
    }
    const gr=ctx.createLinearGradient(gX,0,gX+gW,0);
    gr.addColorStop(0,a(C.O,.25));gr.addColorStop(.6,a(C.O,.85));gr.addColorStop(.82,a('#ff5500',.9));gr.addColorStop(1,a('#ff1100',.9));
    ctx.strokeStyle=gr;ctx.lineWidth=2;ctx.stroke();ctx.restore();
    [10,22,38,55,70].forEach(mi=>{
      if(mi>shown)return;
      const mx=gX+(mi/pts)*gW;
      ctx.save();ctx.strokeStyle=a(C.OD,.5);ctx.lineWidth=1;ctx.setLineDash([2,4]);
      ctx.beginPath();ctx.moveTo(mx,gY);ctx.lineTo(mx,gY+gH+8);ctx.stroke();ctx.setLineDash([]);
      ctx.font='6px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.45);ctx.textAlign='center';ctx.fillText('MAINT',mx,gY+gH+18);
      ctx.restore();
    });
    const ci=Math.min(shown-1,pts-1);
    if(ci>=0){
      const dx=gX+(ci/pts)*gW,dy=gY+gH-vals[ci]*gH;
      const dc=vals[ci]>.7?C.R:C.O;
      ctx.save();ctx.beginPath();ctx.arc(dx,dy,4,0,Math.PI*2);ctx.fillStyle=dc;ctx.shadowColor=dc;ctx.shadowBlur=10;ctx.fill();ctx.restore();
    }
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,.6);ctx.textAlign='center';ctx.fillText('TRANSIT EVENTS →',W/2,H-6);
    requestAnimationFrame(draw);
  }
  registerCanvas('d7', draw);
})();

// ── D8: IDENTITY BRANCHING ────────────────────────────────────────────────
(function initD8(){
  const s=setup('d8');if(!s)return;
  const{ctx,W,H}=s;let t=0,lastT=performance.now();

  function draw(){
    if(!canvasActive['d8']||canvasPaused['d8']){animationHandles['d8_running']=false;return;}
    const now=performance.now(),dt=Math.min((now-lastT)/1000,0.05);lastT=now;
    ctx.clearRect(0,0,W,H);
    t+=0.54*dt;

    const pad=36;
    const cy=H*0.44;
    const portalX=W/2;
    const startX=pad+20;
    const endX=W-pad-20;

    // ── Point A label area ──
    ctx.save();ctx.strokeStyle=a(C.OD,0.2);ctx.lineWidth=1;ctx.setLineDash([3,8]);
    ctx.beginPath();ctx.moveTo(startX,cy-55);ctx.lineTo(startX,cy+35);ctx.stroke();ctx.setLineDash([]);
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.45);ctx.textAlign='center';
    ctx.fillText('POINT A',startX,cy-62);ctx.restore();

    // ── Point B label area ──
    ctx.save();ctx.strokeStyle=a(C.OD,0.2);ctx.lineWidth=1;ctx.setLineDash([3,8]);
    ctx.beginPath();ctx.moveTo(endX,cy-55);ctx.lineTo(endX,cy+35);ctx.stroke();ctx.setLineDash([]);
    ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.45);ctx.textAlign='center';
    ctx.fillText('POINT B',endX,cy-62);ctx.restore();

    // ── Timeline floor ──
    ctx.save();ctx.strokeStyle=a(C.OD,0.3);ctx.lineWidth=1;
    ctx.beginPath();ctx.moveTo(startX,cy+20);ctx.lineTo(portalX-18,cy+20);ctx.stroke();
    ctx.beginPath();ctx.moveTo(portalX+18,cy+20);ctx.lineTo(endX,cy+20);ctx.stroke();
    // Tick marks
    for(let x=startX+20;x<W-pad-20;x+=22){
      if(Math.abs(x-portalX)<22) continue;
      ctx.strokeStyle=a(C.OD,0.15);ctx.lineWidth=0.5;
      ctx.beginPath();ctx.moveTo(x,cy+16);ctx.lineTo(x,cy+24);ctx.stroke();
    }
    ctx.restore();

    // ── Portal ──
    portal(ctx,portalX,cy,14,36,C.O,t);

    // Timeline alpha label
    ctx.font='7px "Share Tech Mono"';ctx.fillStyle=a(C.OD,0.3);ctx.textAlign='center';
    ctx.fillText('TIMELINE α',startX+(portalX-startX)/2,cy+34);
    ctx.fillText('TIMELINE β  (exits here)',portalX+(endX-portalX)/2,cy+34);

    // ── Animation cycle ──
    // 0.00–0.25: Figure α walks from startX to just left of portal
    // 0.25–0.33: Figure α steps into portal, fades out
    // 0.33–0.42: Portal pulses — exchange happening — nothing visible
    // 0.42–0.50: Figure β fades in from portal right side
    // 0.50–0.75: Figure β walks from portal to endX
    // 0.75–0.90: Figure β stands at endX
    // 0.90–1.00: Reset fade

    const cyc=(t*0.14)%1;

    let phase='', status='';

    // Annotations track
    const annotY=cy-38;

    if(cyc<0.25){
      // Alpha approaching
      const p=cyc/0.25;
      const ease=p*p*(3-2*p); // smoothstep
      const fx=startX+ease*(portalX-60-startX);
      fig(ctx,fx,cy,1,C.OB);

      // Arrow showing direction
      ctx.save();ctx.strokeStyle=a(C.OB,0.25);ctx.lineWidth=1;
      ctx.beginPath();ctx.moveTo(fx+10,cy-22);ctx.lineTo(portalX-18,cy-22);
      ctx.lineTo(portalX-26,cy-26);ctx.moveTo(portalX-18,cy-22);ctx.lineTo(portalX-26,cy-18);
      ctx.stroke();ctx.restore();

      // Label
      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OB,0.6);ctx.textAlign='left';
      ctx.fillText('YOU (α) APPROACH PORTAL',startX,annotY);
      status='SUBJECT α MOVING FROM POINT A TOWARD ITF PORTAL';

    } else if(cyc<0.33){
      // Entering portal — fade out
      const p=(cyc-0.25)/0.08;
      const ease=p*p;
      const fx=portalX-60+ease*62; // walks right into center
      fig(ctx,fx,cy,1-ease*0.9,C.OB);

      // Portal flash intensifies — ellipse matches portal shape
      ctx.save();ctx.globalAlpha=ease*0.45;
      ctx.beginPath();ctx.ellipse(portalX,cy,16+ease*8,36+ease*10,0,0,Math.PI*2);
      ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=24;ctx.fill();ctx.restore();

      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OB,0.65);ctx.textAlign='center';
      ctx.fillText('ENTERING PORTAL',portalX,annotY);
      status='MATTER ENCODING — ORIGINAL CONFIGURATION TERMINATING AT POINT A';

    } else if(cyc<0.42){
      // Exchange in void — just portal pulsing, nothing else
      const p=(cyc-0.33)/0.09;
      const pulse=Math.sin(p*Math.PI*3)*0.5;

      ctx.save();ctx.globalAlpha=0.3+pulse*0.35;
      ctx.beginPath();ctx.ellipse(portalX,cy,16+pulse*10,36+pulse*14,0,0,Math.PI*2);
      ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=30;ctx.fill();ctx.restore();

      // Void text
      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.OB,0.4+pulse*0.4);ctx.textAlign='center';
      ctx.fillText('— VOID —',portalX,annotY);
      status='⚡ EXCHANGE OCCURRING IN VOID LAYER — NO DURATION — NO MEMORY FORMED';

    } else if(cyc<0.50){
      // Beta emerging from portal right side
      const p=(cyc-0.42)/0.08;
      const ease=p*p*(3-2*p);
      const fx=portalX+16+ease*44;
      fig(ctx,fx,cy,ease,C.O); // Orange = beta version

      // Portal still glowing slightly
      ctx.save();ctx.globalAlpha=(1-ease)*0.25;
      ctx.beginPath();ctx.ellipse(portalX,cy,14,36,0,0,Math.PI*2);
      ctx.fillStyle=C.OB;ctx.shadowColor=C.OB;ctx.shadowBlur=15;ctx.fill();ctx.restore();

      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.7);ctx.textAlign='center';
      ctx.fillText('YOU (β) EMERGING',portalX+50,annotY);
      status='SUBJECT β RECONSTITUTED AT POINT B — FROM ADJACENT TIMELINE';

    } else if(cyc<0.75){
      // Beta walks to end
      const p=(cyc-0.50)/0.25;
      const ease=p*p*(3-2*p);
      const fx=portalX+60+ease*(endX-portalX-60);
      fig(ctx,fx,cy,1,C.O);

      // small "?" annotation — is this still you?
      ctx.save();ctx.font='9px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.45);ctx.textAlign='center';
      ctx.fillText('?',fx,cy-30);ctx.restore();

      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.6);ctx.textAlign='right';
      ctx.fillText('YOU (β) MOVING TOWARD POINT B',endX,annotY);
      status='β VERSION: SAME MEMORIES. SAME BODY. LIVED A SLIGHTLY DIFFERENT LIFE.';

    } else if(cyc<0.90){
      // Beta standing at end
      fig(ctx,endX,cy,1,C.O);

      // Alpha crossed out / ghost at start
      fig(ctx,startX,cy,0.12,C.OD);
      ctx.save();ctx.strokeStyle=a(C.OD,0.2);ctx.lineWidth=1;
      ctx.beginPath();ctx.moveTo(startX-12,cy-22);ctx.lineTo(startX+12,cy+2);ctx.stroke();
      ctx.beginPath();ctx.moveTo(startX+12,cy-22);ctx.lineTo(startX-12,cy+2);ctx.stroke();
      ctx.restore();

      ctx.font='8px "Share Tech Mono"';ctx.fillStyle=a(C.O,0.55);ctx.textAlign='right';
      ctx.fillText('YOU (β) AT POINT B',endX,annotY);
      ctx.fillStyle=a(C.OD,0.35);ctx.textAlign='left';
      ctx.fillText('YOU (α) — GONE',startX,annotY);
      status='β BELIEVES THEY WENT IN AND CAME OUT. THEY ARE NOT LYING. THEY DO NOT KNOW.';

    } else {
      // Fade to reset
      const p=(cyc-0.90)/0.10;
      fig(ctx,endX,cy,1-p,C.O);
      status='';
    }

    // Bottom status
    if(status){
      ctx.font='8px "Share Tech Mono"';
      ctx.fillStyle=a(C.OD,0.6);ctx.textAlign='center';
      // Word wrap manually for long strings — split at 70 chars
      const words=status.split(' ');
      let line='';const lines=[];const maxW=W-80;
      ctx.font='7.5px "Share Tech Mono"';
      for(const w of words){
        const test=line?line+' '+w:w;
        if(ctx.measureText(test).width>maxW&&line){lines.push(line);line=w;}
        else{line=test;}
      }
      if(line)lines.push(line);
      const statusY=H-8-(lines.length-1)*12;
      lines.forEach((ln,i)=>{
        ctx.fillStyle=a(C.OD,0.6);
        ctx.fillText(ln,W/2,statusY+i*12);
      });
    }

    requestAnimationFrame(draw);
  }
  registerCanvas('d8', draw, true);
})();

// ── REDACTED ELEMENTS ─────────────────────────────────────────────────────
document.querySelectorAll('.redacted').forEach(el => {
  function reveal() {
    if (el.dataset.revealed === 'true') return;
    el.dataset.revealed = 'true';
    el.setAttribute('aria-label', el.textContent + ' (revealed)');
  }
  el.addEventListener('click', reveal);
  el.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); reveal(); }
  });
});

// ── ACTIVE TOC HIGHLIGHTING via IntersectionObserver ─────────────────────
(function initTOC() {
  const tocLinks = document.querySelectorAll('.toc-item[data-section]');
  const sections = document.querySelectorAll('section[id]');
  if (!sections.length || !tocLinks.length) return;

  const sectionMap = {};
  sections.forEach(sec => { sectionMap[sec.id] = sec; });

  const linkMap = {};
  tocLinks.forEach(link => {
    const sec = link.dataset.section;
    if (sec) linkMap[sec] = link;
  });

  let currentActive = null;

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        if (currentActive) currentActive.classList.remove('active');
        const link = linkMap[id];
        if (link) { link.classList.add('active'); currentActive = link; }
      }
    });
  }, { rootMargin: '-10% 0px -60% 0px', threshold: 0 });

  sections.forEach(sec => observer.observe(sec));

  // Smooth scroll on TOC click
  tocLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const id = link.dataset.section;
      const target = id ? document.getElementById(id) : null;
      if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });
})();

// ── SOUND EFFECTS — Web Audio API ────────────────────────────────────────
(function initSounds(){
  let ctx = null;
  function getCtx(){
    if(!ctx) ctx = new (window.AudioContext||window.webkitAudioContext)();
    return ctx;
  }

  function playHover(){
    try {
      const ac = getCtx();
      const osc = ac.createOscillator();
      const gain = ac.createGain();
      osc.connect(gain); gain.connect(ac.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(880, ac.currentTime);
      osc.frequency.exponentialRampToValueAtTime(1040, ac.currentTime + 0.06);
      gain.gain.setValueAtTime(0.0, ac.currentTime);
      gain.gain.linearRampToValueAtTime(0.012, ac.currentTime + 0.01);
      gain.gain.exponentialRampToValueAtTime(0.001, ac.currentTime + 0.08);
      osc.start(ac.currentTime);
      osc.stop(ac.currentTime + 0.09);
    } catch(e){}
  }

  // Real recorded-style mouse click — embedded as base64 WAV, no network needed
  const CLICK_B64 = 'UklGRrgHAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YZQHAAAAAIIAtgPYBaMLXg+/EVMXyxbDGi0Z8hk5HYYhcR3IH1ckUifnIuIdxhxGDEsIG/f/6JXc39Ox0BDI2cvd0MrWfuKD6hT2hQHvDKMQ4xKSFc4UxhOLFjQXVBfSG9IeySJFI2sgix4zFHcKDv4X7frdPs3AwHi1yqy2qGimD6lFrVezKroGwjXJK8+s1Q/bSeJr6SLyq/tBBpwSwR8KLDA4dUJbSltPs1EMUA9MzEUfPu80NyzPI1wcxxVGEF8LSwddA4//Wvsd9gTylO2u6dPmUuVq5V3nP+uX8B/3SP5TBcwLNREhFUUX5hfWFoUUQBFlDVwJUgWFAc/9Pvqg9sPyhu7I6ZrkHd+M2UfUps8VzOvJacmvyrjNXNJV2ETfxeZy7vb1D/2SA3MJuA56E84X1RubHyAjUCYIKRsrVCyILJMraikXJr4hmBzsFiARdQs9BrMB/P0n+yz58/dY9zH3WPeu9yH4rPhU+Sn6O/uZ/Er+RgB8AsoEAQfxCGUKMQs0C1wKqggxBhMDf/+o+8P3/vOA8GPts+py6JzmJ+UH5DbjteKL4sTidOOv5ITm/+gg7N3vHPS8+JH9agIaB3MLUQ+bEkMVRxeuGIcZ5RnbGXgZyhjYF6IWKRVrE2YRHg+cDO8JLgdyBNsBh/+O/Qb8+/pw+mD6u/ps+1v8bP2I/pv/kgBoARcCngIAA0ADXgNbAzID3QJUAo4BhAA0/5z9xfu7+ZH3XvU780Hxh+8h7h3tguxS7IrsI+0Q7kjvv/Bs8kb0SPZt+LL6Ef2F/wMCgQTwBkAJXws8DcgO+A/DECgRKRHPECUQOQ8aDtgMgAseCrsIXQcJBsIEiwNlAlUBXwCK/9j+Uf75/dP93v0Y/nr++v6N/yYAuAA3AZgB0gHiAcQBegEGAW8Auf/r/gn+GP0c/Br7FPoO+Q34FPcs9lv1qvQh9MnzqPPE8x/0ufSP9Zv21vc3+bP6QPzU/Wf/8QBrAtIDIQVUBmcHWQglCckJQQqLCqUKjwpJCtgJPwmFCLEHzAbfBfMEDgQ4A3UCyQE1AbkAVQAHAM//qP+S/4r/kP+h/7v/3P8AACUARwBhAG0AaQBRAJ8A2f94/wD/c/7W/S79f/zR+yf7h/r1+XT5Cfm0+Hf4VPhN+GL4lPjk+FH53PmC+kP7GvwE/fz9/f4AAP8A9gHeArMDcQQVBZ4FCwZcBpEGqwatBpYGagYpBtYFdAUEBYoECASDA/0CfAIBApABKwHVAI8AVwAvABMABAD+//7/AQAGAAsADQALAAMA9v/g/8L/m/9r/zL/7/6j/k/+9P2U/TD9zPxr/A78u/ty+zj7Dvv3+vL6Afsk+1r7ovv7+2P82fxb/eb9ef4S/63/RwDgAHQBAAKDAvgCXwO2A/sDLQROBFwEWgRIBCgE/APGA4gDRAP8ArECZQIaAtEBiwFJAQ0B1gCmAH0AWwBAACsAGwAQAAgAAQD7//P/6f/a/8f/rv+Q/2z/Q/8V/+P+rf51/jv+Af7I/ZH9Xv0v/Qb95PzL/Lv8tvy8/M787PwV/Uv9iv3U/Sb+fv7c/j3/oP8CAGMAwQAbAW8BvAECAj4CcQKaArkCzgLYAtgCzgK8AqMCggJcAjICBQLWAacBeAFLASAB+ADTALEAkgB3AF4ASQA2ACUAFgAIAPz/7v/h/9L/wf+u/5n/gf9m/0n/Kf8H/+P+v/6a/nb+VP41/hj+AP7t/d791v3U/dn95f33/RH+Mf5X/oP+tf7r/iX/Yv+h/+H/HwBdAJkA0gAGATYBYAGFAaMBvAHNAdkB3wHeAdkBzgG/AawBlQF8AWEBRQEoAQsB7gDSALgAnwCHAHIAXgBMADwALQAeABEAAwD3/+n/2//N/73/rP+a/4j/dP9f/0n/M/8c/wb/8P7b/sj+tv6n/pv+kv6N/oz+j/6X/qL+sv7H/t/++/4a/zz/Yf+H/6//2P8AACcATwB0AJgAuQDXAPEACAEbASoBNQE8AT8BPwE7ATQBKwEfAREBAgHxAOAAzgC7AKkAlwCGAHUAZQBVAEcAOQAsACAAFAAIAP7/8v/n/9v/z//C/7X/p/+Z/4v/fP9u/1//Uf9D/zb/Kv8f/xb/D/8K/wf/Bv8I/wz/FP8e/yv/Ov9L/1//df+M/6X/v//Z//P/DQAnAEAAVwBuAIIAlQCmALQAwADJANAA1ADXANYA1ADQAMoAwwC6ALAApQCaAI8AgwB3AGsAXwBTAEgAPQAzACgAHgAVAAsAAgD5//D/5//e/9T/y//B/7f/rf+j/5n/j/+G/33/dP9t/2b/YP9c/1j/V/9W/1j/W/9g/2b/bv94/4P/kP+d/6z/vP/N/97/7/8AABEAIQAxAEEATwBcAGgAcgB7AIMAiQCNAJAAkQCRAI8AjQCJAIQAfwB5AHIAagBjAFsAUwBKAEIAOgAyACoAIwAbABQADAAFAP//+P/w/+n/4v/b/9T/zf/G/7//uP+y/6v/pf+g/5v/lv+T/5D/jv+M/4z/jf+P/5L/lv+c/6L/qf+x/7r/xP/O/9n/5P/v//v/BQAQABsAJgAvADkAQQBJAE8AVQBaAF0AYABiAA==';

  let clickBuffer = null;
  async function ensureClickBuffer(){
    if(clickBuffer) return;
    try {
      const ac = getCtx();
      const binary = atob(CLICK_B64);
      const bytes = new Uint8Array(binary.length);
      for(let i=0;i<binary.length;i++) bytes[i]=binary.charCodeAt(i);
      clickBuffer = await ac.decodeAudioData(bytes.buffer);
    } catch(e){}
  }
  // Pre-decode after first user gesture
  document.addEventListener('mousedown', ()=>ensureClickBuffer(), {once:true});

  function playClick(){
    try {
      const ac = getCtx();
      if(clickBuffer){
        const src = ac.createBufferSource();
        src.buffer = clickBuffer;
        const gain = ac.createGain();
        gain.gain.value = 0.22;
        src.connect(gain); gain.connect(ac.destination);
        src.start(ac.currentTime);
      } else {
        // Fallback: synthesized snap
        const sr = ac.sampleRate;
        const bufLen = Math.floor(sr * 0.014);
        const buf = ac.createBuffer(1, bufLen, sr);
        const d = buf.getChannelData(0);
        for(let i=0;i<bufLen;i++){const t=i/sr;d[i]=(Math.random()*2-1)*Math.exp(-t*900);}
        const src = ac.createBufferSource(); src.buffer=buf;
        const hp = ac.createBiquadFilter(); hp.type='highpass'; hp.frequency.value=700;
        const g = ac.createGain(); g.gain.value=1.1;
        src.connect(hp); hp.connect(g); g.connect(ac.destination);
        src.start(ac.currentTime);
      }
    } catch(e){}
  }

  // Attach hover sound to intentionally interactive elements only
  const hoverTargets = 'a, button, .toc-item, .redacted, .topbar-title, canvas[tabindex]';
  let lastHovered = null;

  document.addEventListener('mouseover', e => {
    const el = e.target.closest(hoverTargets);
    if(el && el !== lastHovered){
      lastHovered = el;
      playHover();
    }
  });
  document.addEventListener('mouseout', e => {
    const el = e.target.closest(hoverTargets);
    if(el === lastHovered) lastHovered = null;
  });

  // Attach click sound globally
  document.addEventListener('mousedown', e => {
    playClick();
  });
})();

// ── BOOT SEQUENCE ────────────────────────────────────────────────────────
(function initBoot(){
  const screen = document.getElementById('boot-screen');
  const linesEl = document.getElementById('boot-lines');
  const fill = document.getElementById('boot-fill');
  if(!screen) return;

  // Hide main content during boot
  document.getElementById('main-content').style.visibility = 'hidden';
  document.querySelector('.topbar').style.visibility = 'hidden';
  document.querySelector('.statusbar') && (document.querySelector('.statusbar').style.visibility = 'hidden');

  const lines = [
    { text: 'VSA SECURE TERMINAL v4.2.1', delay: 200 },
    { text: 'INITIALIZING ENCRYPTED SESSION...', delay: 500 },
    { text: 'VERIFYING CLEARANCE CREDENTIALS...', delay: 900 },
    { text: 'CLEARANCE: LEVEL-1 — PERSONAL RESEARCH PARTITION', delay: 1300 },
    { text: 'LOADING DOCUMENT: BISHOP_FIELDNOTES_COMPREHENSIVE.doc', delay: 1700 },
    { text: 'DECRYPTING...', delay: 2100 },
    { text: 'CLASSIFICATION: PERSONAL RESEARCH — NOT FOR DISTRIBUTION', delay: 2400 },
    { text: 'WARNING: THIS DOCUMENT IS RETAINED FOR PERSONAL RECORD ONLY', delay: 2800 },
    { text: 'ACCESSING CLASSIFIED TERMINAL...', delay: 3200, bright: true },
  ];

  lines.forEach(({text, delay, bright}) => {
    setTimeout(() => {
      const div = document.createElement('div');
      div.className = 'boot-line';
      div.style.animationDelay = '0s';
      div.style.color = bright ? '#e8922a' : '#c87820';
      div.textContent = '> ' + text;
      linesEl.appendChild(div);
      // Progress
      const pct = Math.min(100, ((delay - 200) / 3200) * 100);
      fill.style.width = pct + '%';
    }, delay);
  });

  // Blinking cursor at end
  setTimeout(() => {
    const cur = document.createElement('div');
    cur.className = 'boot-line';
    cur.style.animationDelay = '0s';
    cur.innerHTML = '> <span class="boot-cursor"></span>';
    linesEl.appendChild(cur);
    fill.style.width = '100%';
  }, 3600);

  // Fade out and reveal content
  setTimeout(() => {
    screen.classList.add('fade-out');
    setTimeout(() => {
      screen.style.display = 'none';
      document.getElementById('main-content').style.visibility = '';
      document.querySelector('.topbar').style.visibility = '';
      document.querySelector('.statusbar') && (document.querySelector('.statusbar').style.visibility = '');
      // Trigger scroll reveals after boot
      initScrollReveal();
    }, 900);
  }, 4400);
})();

// ── SCROLL REVEAL ─────────────────────────────────────────────────────────
function initScrollReveal(){
  const sections = document.querySelectorAll('.reveal-section');
  if(!sections.length) return;
  const obs = new IntersectionObserver((entries) => {
    entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); }});
  }, { threshold: 0.06, rootMargin: '0px 0px -40px 0px' });
  sections.forEach(s => obs.observe(s));
}

// ── GLOSSARY PANEL ────────────────────────────────────────────────────────
(function initGlossary(){
  const panel = document.getElementById('glossary-panel');
  const toggle = document.getElementById('glossary-toggle');
  const close = document.getElementById('glossary-close');
  if(!panel || !toggle) return;

  function openGlossary(){
    panel.classList.add('open');
    panel.setAttribute('aria-hidden','false');
    toggle.setAttribute('aria-expanded','true');
    toggle.style.right = '320px';
  }
  function closeGlossary(){
    panel.classList.remove('open');
    panel.setAttribute('aria-hidden','true');
    toggle.setAttribute('aria-expanded','false');
    toggle.style.right = '0';
  }
  toggle.addEventListener('click', () => panel.classList.contains('open') ? closeGlossary() : openGlossary());
  close && close.addEventListener('click', closeGlossary);
  document.addEventListener('keydown', e => { if(e.key === 'Escape' && panel.classList.contains('open')) closeGlossary(); });
})();

// ── TOPBAR TYPEWRITER — skippable ─────────────────────────────────────────
(function initTypewriter() {
  const el = document.getElementById('topbar-title');
  if (!el) return;
  const tx = el.dataset.text || el.textContent;
  el.textContent = '';
  let i = 0, done = false;

  function complete() {
    if (done) return;
    done = true;
    el.textContent = tx;
  }

  function type() {
    if (done) return;
    if (i < tx.length) { el.textContent += tx[i++]; setTimeout(type, 18); }
    else { done = true; }
  }

  el.addEventListener('click', complete);
  el.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') complete(); });

  setTimeout(type, 300);
})();
</script>
</body>
</html>
